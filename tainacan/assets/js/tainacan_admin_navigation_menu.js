(()=>{var e,t,n,a,i;!function(){var e=document.getElementById("tainacan-root-menu");if(e&&e.children.length){var t=Array.from(e.children);t.forEach((function(e){if(e.classList&&e.classList.contains("menu-item-has-children")){var n=e.querySelector("button");if(!n)return;n.addEventListener("click",(function(){e.classList.toggle("is-open");var a=e.classList.contains("is-open");n.setAttribute("aria-expanded",a),a&&t.forEach((function(t){if(t!==e&&t.classList&&t.classList.contains("menu-item-has-children")){var n=t.querySelector("button");n&&(t.classList.remove("is-open"),n.setAttribute("aria-expanded",!1))}}))}))}})),document.querySelectorAll(".menu-item-backdrop").forEach((function(e){e.addEventListener("click",(function(){t.forEach((function(e){if(e.classList&&e.classList.contains("menu-item-has-children")){var t=e.querySelector("button");t&&(e.classList.remove("is-open"),t.setAttribute("aria-expanded",!1))}}))}))}))}}(),function(){if(wp&&wp.hooks){var e=document.getElementById("tainacan-navigation-menu"),t=document.getElementById("tainacan_admin");t||(t=document.getElementById("tainacan-root-menu"));var n=document.getElementById("tainacan_collection_links"),a=document.getElementById("tainacan-breadcrumbs-list"),i=[];n&&n.childNodes.forEach((function(e){return i.push(e.cloneNode(!0))})),wp.hooks.addAction("tainacan_navigation_path_updated","tainacan_admin_navigation_menu",(function(o){var c=o.currentRoute,s=o.adminOptions,r=o.parentEntity,l=o.childEntity,d=o.collection,u=t?t.querySelectorAll("a"):[],m=!1;u.forEach((function(e){var t=e.href.split("#");t[1]&&!c.collectionId&&"/collections"!=c.path&&"/items"!=c.path&&"/my-items"!=c.path&&0==c.path.indexOf(t[1])?(e.setAttribute("aria-current","page"),m=!0):e.removeAttribute("aria-current")})),m&&(n&&n.parentNode&&n.parentNode.classList.remove("is-open"),!e.classList.contains("is-collapsed")&&t&&t.parentNode&&t.parentNode.classList.add("is-open"));var p=n?n.querySelectorAll("a"):[],h=!1;if(p.forEach((function(e){var t=e.href.split("#");t[1]&&c.params.collectionId&&c.meta.menuLink&&0==c.path.indexOf(t[1]+"/"+c.params.collectionId+"/"+c.meta.menuLink)||t[1]&&t[1].split("?")[0]==c.path?(e.setAttribute("aria-current","page"),h=!0):e.removeAttribute("aria-current")})),h&&(t&&t.parentNode&&t.parentNode.classList.remove("is-open"),!e.classList.contains("is-collapsed")&&n&&n.parentNode&&n.parentNode.classList.add("is-open")),n)if(c.params.collectionId&&d){for(;n.lastChild;)n.removeChild(n.lastChild);if([{id:"collections",label:wp.i18n.__("Collections list","tainacan"),icon:"pointer tainacan-icon-rotate-180",href:"collections/",hide:"true"===s.hideNavigationCollectionsButton||!0===s.hideNavigationCollectionsButton},{id:"items",label:wp.i18n.__("Collection items","tainacan"),icon:"items",href:"collections/".concat(c.params.collectionId,"/items"),hide:"true"===s.hideNavigationCollectionItemsButton||!0===s.hideNavigationCollectionItemsButton},{id:"my-items",label:wp.i18n.__("My items","tainacan"),icon:"userfill",href:"collections/".concat(c.params.collectionId,"/my-items?authorid=")+tainacan_user.data.ID,hide:"true"===s.hideNavigationCollectionMyItemsButton||!0===s.hideNavigationCollectionMyItemsButton},{id:"settings",label:wp.i18n.__("Settings","tainacan"),icon:"settings",href:"collections/".concat(c.params.collectionId,"/settings"),hide:!d.current_user_can_edit||"true"===s.hideNavigationCollectionSettingsButton||!0===s.hideNavigationCollectionSettingsButton},{id:"metadata",label:wp.i18n.__("Metadata","tainacan"),icon:"metadata",href:"collections/".concat(c.params.collectionId,"/metadata"),hide:!d.current_user_can_edit_metadata||"true"===s.hideNavigationCollectionMetadataButton||!0===s.hideNavigationCollectionMetadataButton},{id:"filters",label:wp.i18n.__("Filters","tainacan"),icon:"filters",href:"collections/".concat(c.params.collectionId,"/filters"),hide:!d.current_user_can_edit_filters||"true"===s.hideNavigationCollectionFiltersButton||!0===s.hideNavigationCollectionFiltersButton},{id:"activities",label:wp.i18n.__("Activities","tainacan"),icon:"activities",href:"collections/".concat(c.params.collectionId,"/activities"),hide:!tainacan_user.caps.tnc_rep_read_logs||"true"===s.hideNavigationCollectionActivitiesButton||!0===s.hideNavigationCollectionActivitiesButton},{id:"capabilities",label:wp.i18n.__("Capabilities","tainacan"),icon:"capability",href:"collections/".concat(c.params.collectionId,"/capabilities"),hide:!d.current_user_can_edit_users||"true"===s.hideNavigationCollectionCapabilitiesButton||!0===s.hideNavigationCollectionCapabilitiesButton},{id:"exporters",label:wp.i18n.__("Exporters","tainacan"),icon:"export",href:"exporters?sourceCollection=".concat(c.params.collectionId),hide:!d.current_user_can_edit_users||"true"===s.hideNavigationCollectionExportersButton||!0===s.hideNavigationCollectionExportersButton},{id:"reports",label:wp.i18n.__("Reports","tainacan"),svgIcon:'<svg fill="currentColor" width="1em" height="1em" viewBox="0 0 16 16" version="1.1" xmlns:svg="http://www.w3.org/2000/svg">\n                                    <path d="m 10.1,9.75 h 1.05 c 0.175,0 0.35,-0.175 0.35,-0.35 V 5.725 c 0,-0.175 -0.175,-0.35 -0.35,-0.35 H 10.1 c -0.175,0 -0.35,0.175 -0.35,0.35 V 9.4 c 0,0.175 0.175,0.35 0.35,0.35 z m 2.625,0 h 1.05 c 0.175,0 0.35,-0.175 0.35,-0.35 V 3.1 c 0,-0.175 -0.175,-0.35 -0.35,-0.35 h -1.05 c -0.175,0 -0.35,0.175 -0.35,0.35 v 6.3 c 0,0.175 0.175,0.35 0.35,0.35 z m -7.875,0 H 5.9 C 6.075,9.75 6.25,9.575 6.25,9.4 V 7.475 C 6.25,7.3 6.075,7.125 5.9,7.125 H 4.85 C 4.675,7.125 4.5,7.3 4.5,7.475 V 9.4 c 0,0.175 0.175,0.35 0.35,0.35 z m 2.625,0 h 1.05 C 8.7,9.75 8.875,9.575 8.875,9.4 V 3.975 C 8.875,3.8 8.7,3.625 8.525,3.625 H 7.475 C 7.3,3.625 7.125,3.8 7.125,3.975 V 9.4 c 0,0.175 0.175,0.35 0.35,0.35 z m 7.0875,1.75 H 2.75 V 3.1875 C 2.75,2.9457813 2.5542187,2.75 2.3125,2.75 H 1.4375 C 1.1957812,2.75 1,2.9457813 1,3.1875 v 9.1875 c 0,0.483175 0.3918355,0.875 0.875,0.875 H 14.5625 C 14.804175,13.25 15,13.054175 15,12.8125 v -0.875 C 15,11.695825 14.804175,11.5 14.5625,11.5 Z" />\n                                </svg>',href:"collections/".concat(c.params.collectionId,"/reports"),hide:!d.current_user_can_read_private_items||"true"===s.hideNavigationCollectionReportsButton||!0===s.hideNavigationCollectionReportsButton}].forEach((function(e){if(!e.hide){var t=document.createElement("li"),a=document.createElement("a");a.setAttribute("href",document.location.pathname+document.location.search+"#"+e.href),a.innerHTML="",e.icon?a.innerHTML+='<span class="icon" aria-hidden="true"><i class="tainacan-icon tainacan-icon-'+e.icon+'"></i></span>':e.svgIcon&&(a.innerHTML+='<span class="icon" aria-hidden="true"><i class="tainacan-icon tainacan-icon-svg">'+e.svgIcon+"</i></span>"),a.innerHTML+='<span class="menu-text">'+e.label+"</span>",e.id===c.meta.menuLink&&a.setAttribute("aria-current","page"),t.setAttribute("id",e.id),t.appendChild(a),n.appendChild(t)}})),"true"!==s.hideNavigationCollectionName&&!0!==s.hideNavigationCollectionName){var f=document.createElement("li");f.setAttribute("class","separator-list-item"),f.innerHTML='<span class="icon" aria-hidden="true"><i class="tainacan-icon tainacan-icon-collection tainacan-icon-1-125em"></i></span><span class="menu-text">'+d.name+"</span>",n.insertBefore(f,n.children[1])}}else{for(;n.lastChild;)n.removeChild(n.lastChild);i.forEach((function(e){return n.appendChild(e)}))}if(a&&c.meta&&c.meta.title){a.querySelectorAll(".dynamic-breadcrumb").forEach((function(e){return a.removeChild(e)}));var v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=document.createElement("li");i.classList.add("dynamic-breadcrumb"),i.innerHTML=n?'<span class="menu-text">'.concat(e,"</span>"):'<a href="'.concat(document.location.pathname+document.location.search,"#").concat(t,'">').concat(e,"</a>"),a.appendChild(i)};r&&(r.label&&r.rootLink&&v(r.label,r.rootLink),r.name&&r.defaultLink&&v(r.name,r.defaultLink)),l&&(l.label&&l.rootLink&&v(l.label,l.rootLink),l.name&&l.defaultLink&&v(l.name,l.defaultLink)),v(c.meta.title+(r&&r.name&&!l?" ".concat(r.name):""),"",!0)}}))}}(),e=document.getElementById("tainacan-menu-toggler"),t=document.getElementById("tainacan-menu-collapser"),n=document.getElementById("tainacan-fullscreen-toggler"),a=document.getElementById("tainacan-navigation-menu"),i=document.getElementById("tainacan-navigation-menu-backdrop"),e&&t&&a&&i&&(e.addEventListener("click",(function(){var t=a.classList.contains("is-active");a.classList.toggle("is-active"),e.ariaPressed=""+t})),i.addEventListener("click",(function(){a.classList.remove("is-active"),e.ariaPressed="false"})),t.addEventListener("click",(function(){var e=!a.classList.contains("is-collapsed");a.classList.toggle("is-collapsed"),t.ariaPressed=""+e;var n=JSON.parse(tainacan_user.prefs);n.is_navigation_sidebar_collapsed=e;var i={meta:{tainacan_prefs:JSON.stringify(n)}};tainacan_user.nonce&&tainacan_user.wp_api_url&&fetch(tainacan_user.wp_api_url+"users/me",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":tainacan_user.nonce},body:JSON.stringify(i)}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).catch((function(e){console.error("Request to /users/me failed. Maybe you're not logged in.",e)}))}))),n&&n.addEventListener("click",(function(){var e=document.getElementById("adv-settings"),t=document.getElementById("show-settings-link");if(e&&e["tainacan-fullscreen-state"]&&t){var a=!document.body.classList.contains("tainacan-pages-container--fullscreen");if(e["tainacan-fullscreen-state"].value==a){var i=JSON.parse(tainacan_user.prefs);i.is_fullscreen=a;var o={meta:{tainacan_prefs:JSON.stringify(i)}};tainacan_user.nonce&&tainacan_user.wp_api_url&&fetch(tainacan_user.wp_api_url+"users/me",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":tainacan_user.nonce},body:JSON.stringify(o)}).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){document.body.classList.toggle("tainacan-pages-container--fullscreen"),n.ariaPressed=""+a;var i=new CustomEvent("tainacan_fullscreen_mode_change",{detail:{isFullscreen:a}});document.dispatchEvent(i),e.meta&&e.meta.tainacan_prefs&&(tainacan_user.prefs=e.meta.tainacan_prefs),t.click()})).catch((function(e){console.error("Request to /users/me failed. Maybe you're not logged in.",e)}))}else t.click()}}))})();