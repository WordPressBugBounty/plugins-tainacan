"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[6525],{1577:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(31601),i=a.n(n),o=a(76314),l=a.n(o)()(i());l.push([e.id,'[data-v-1ae0511e] .tabs{margin-bottom:0 !important}[data-v-1ae0511e] .tabs ul{padding:0}.hidden-tabs-section .tab-content[data-v-1ae0511e]{padding-top:0 !important}.hidden-tabs-section .tab-content .tainacan-finder-columns-container[data-v-1ae0511e]{border:none}.tab-content[data-v-1ae0511e]{transition:height .2s ease;padding:.5em 0px !important}.tainacan-form[data-v-1ae0511e]{margin-top:12px;max-width:100%}.tainacan-form .form-submit[data-v-1ae0511e]{padding-top:16px !important}.tainacan-form.is-expanded-on-mobile[data-v-1ae0511e]:focus,.tainacan-form.is-expanded-on-mobile[data-v-1ae0511e]:focus-within,.tainacan-form.is-expanded-on-mobile[data-v-1ae0511e]:focus-visible{background-color:var(--tainacan-background-color);z-index:9999999;position:fixed;top:0;left:0;width:100%;height:100%}.tainacan-show-more[data-v-1ae0511e]{width:100%;display:flex;justify-content:center;box-shadow:none;cursor:pointer;border:1px solid var(--tainacan-gray1);margin-top:10px;margin-bottom:-0.2em}.tainacan-show-more[data-v-1ae0511e]:hover,.tainacan-show-more[data-v-1ae0511e]:focus{outline:none;box-shadow:none;background-color:var(--tainacan-blue1)}.tainacan-show-more[data-v-1ae0511e]:focus-visible{outline:2px solid var(--tainacan-blue5);outline-offset:2px;box-shadow:none}.tainacan-li-checkbox-modal[data-v-1ae0511e]{display:flex;justify-content:space-between;align-items:stretch;margin-left:0px !important;padding:2px 0 !important;-webkit-break-inside:avoid;-moz-column-break-inside:avoid;break-inside:avoid}.tainacan-li-checkbox-modal[data-v-1ae0511e] .b-checkbox,.tainacan-li-checkbox-modal[data-v-1ae0511e] .b-radio{max-width:100%;min-height:1.75em;margin-left:.7em;margin-bottom:0px !important;height:auto;padding-top:0px;padding-bottom:0px;-webkit-break-inside:avoid;-moz-column-break-inside:avoid;break-inside:avoid}.tainacan-li-checkbox-modal[data-v-1ae0511e] .b-checkbox .control-label,.tainacan-li-checkbox-modal[data-v-1ae0511e] .b-radio .control-label{white-space:normal;overflow:visible}@media screen and (max-width: 768px){.tainacan-li-checkbox-modal[data-v-1ae0511e] .b-checkbox .control-label,.tainacan-li-checkbox-modal[data-v-1ae0511e] .b-radio .control-label{padding-top:.8125em;padding-bottom:.8125em;padding-left:calc(.875em - 1px);width:100%;border-bottom:1px solid var(--tainacan-gray1)}}.tainacan-li-checkbox-modal[data-v-1ae0511e] .b-checkbox.is-disabled,.tainacan-li-checkbox-modal[data-v-1ae0511e] .b-radio.is-disabled{cursor:not-allowed;opacity:.5}.tainacan-li-checkbox-modal[data-v-1ae0511e]:hover{background-color:var(--tainacan-gray1)}.tainacan-li-checkbox-list[data-v-1ae0511e]{flex-grow:0;flex-shrink:1;max-width:calc(100% - .5em);padding-left:.5em;margin:0;-webkit-break-inside:avoid;-moz-column-break-inside:avoid;break-inside:avoid}.tainacan-li-checkbox-list[data-v-1ae0511e] .b-checkbox,.tainacan-li-checkbox-list[data-v-1ae0511e] .b-radio{margin-right:0px;margin-bottom:0;-webkit-break-inside:avoid;-moz-column-break-inside:avoid;break-inside:avoid}.tainacan-li-checkbox-list[data-v-1ae0511e] .b-checkbox .control-label,.tainacan-li-checkbox-list[data-v-1ae0511e] .b-radio .control-label{white-space:normal;overflow:visible}.tainacan-li-checkbox-list[data-v-1ae0511e] .b-checkbox.is-disabled,.tainacan-li-checkbox-list[data-v-1ae0511e] .b-radio.is-disabled{cursor:not-allowed;opacity:.5}@media screen and (max-width: 768px){.tainacan-li-checkbox-list[data-v-1ae0511e] .b-checkbox .control-label,.tainacan-li-checkbox-list[data-v-1ae0511e] .b-radio .control-label{padding-top:.8125em;padding-bottom:.8125em;padding-left:calc(.875em - 1px);width:100%;border-bottom:1px solid var(--tainacan-gray1)}}.tainacan-li-checkbox-list[data-v-1ae0511e]:hover:not(.result-info){background-color:var(--tainacan-gray1)}.tainacan-li-checkbox-list.result-info[data-v-1ae0511e]{padding:.5rem .25rem .25rem .25rem;width:100%;max-width:100%;-moz-column-span:all;column-span:all;font-size:.75em;color:var(--tainacan-info-color);text-align:center}.tainacan-finder-columns-container[data-v-1ae0511e]{background-color:var(--tainacan-background-color, var(--tainacan-white));border:1px solid var(--tainacan-gray1);border-bottom-left-radius:var(--tainacan-dropdownmenu-border-radius);border-bottom-right-radius:var(--tainacan-dropdownmenu-border-radius);border-top-right-radius:0px;border-top-left-radius:0px;border-top:0px;margin-top:-1px;display:flex;overflow:auto;scroll-snap-type:x mandatory;scroll-snap-align:start;padding:0 !important;max-height:40vh;transition:heigth .5s ease,min-height .5s ease}.tainacan-finder-columns-container[data-v-1ae0511e]:focus{outline:none}.tainacan-finder-column[data-v-1ae0511e]{border-right:solid 1px var(--tainacan-gray1);flex-basis:auto;flex-grow:1;max-width:600px;min-width:200px;margin:0;padding:0em;transition:width .2s ease}.tainacan-finder-column.has-only-one-column[data-v-1ae0511e]{max-width:100%;border-right:none}.tainacan-finder-column.has-only-one-column ul[data-v-1ae0511e]{-moz-column-count:2;-moz-column-gap:0;-moz-column-rule:none;-webkit-column-count:2;-webkit-column-gap:0;-webkit-column-rule:none;column-count:2;-moz-column-gap:2em;column-gap:2em;column-rule:none;overflow-y:hidden;overflow-x:auto}.tainacan-finder-column ul[data-v-1ae0511e]{max-height:calc(233px - .7em);min-height:inherit;overflow-y:auto;overflow-x:hidden;list-style:none;margin:0;padding-left:0}.tainacan-finder-column a[data-v-1ae0511e]{font-size:.75em;white-space:nowrap;display:flex;align-items:center}.tainacan-finder-column a .tainacan-icon[data-v-1ae0511e]{font-size:1.5em}.tainacan-finder-column .column-label[data-v-1ae0511e]{color:var(--tainacan-label-color);display:block;font-size:.75em;font-weight:bold;padding:.45em .75em;margin:0;position:relative;border-bottom:1px solid var(--tainacan-gray1)}.tainacan-finder-column:not(:first-child) .column-label[data-v-1ae0511e]{padding-left:calc(.75em + 12px)}.tainacan-finder-column:not(:first-child) .column-label[data-v-1ae0511e]::after,.tainacan-finder-column:not(:first-child) .column-label[data-v-1ae0511e]::before{content:"";display:block;position:absolute;right:100%;width:0;height:0;border-style:solid}.tainacan-finder-column:not(:first-child) .column-label[data-v-1ae0511e]::after{top:0px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) #fff;border-left-width:12px;border-top-width:calc(1.2em + 1px);border-bottom-width:calc(1.2em + 0px);left:-3px}.tainacan-finder-column:not(:first-child) .column-label[data-v-1ae0511e]::before{top:0px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) var(--tainacan-gray1);border-left-width:12px;border-top-width:calc(1.2em + 1px);border-bottom-width:calc(1.2em + 0px);left:-1px}ul[data-v-1ae0511e]{-webkit-margin-after:0;-webkit-margin-start:0;-webkit-margin-end:0;-webkit-padding-start:0;-webkit-margin-before:0}.field[data-v-1ae0511e]:not(:last-child){margin-bottom:0 !important}.tainacan-checkbox-search-section[data-v-1ae0511e]{margin:0px !important;padding:0px !important}.tainacan-checkbox-search-section .control[data-v-1ae0511e]{margin:0}.tainacan-checkbox-search-section .input .icon .mdi[data-v-1ae0511e]::before{color:var(--tainacan-input-color)}.tainacan-checkbox-search-section .button[data-v-1ae0511e]{border-radius:var(--tainacan-input-border-radius, 0) 0 0 var(--tainacan-input-border-radius, 0) !important;min-height:100%;background-color:var(--tainacan-input-background-color);border:1px solid var(--tainacan-input-border-color);transition:background .2s ease}.tainacan-checkbox-search-section .button.is-active[data-v-1ae0511e]{background-color:var(--tainacan-primary)}.tainacan-checkbox-search-section .button.is-active .tainacan-icon[data-v-1ae0511e]::before{color:var(--tainacan-secondary)}.tainacan-checkbox-search-section[data-v-1ae0511e] .field-body>.field{padding:0px !important;margin-left:0px !important}.tainacan-checkbox-search-section[data-v-1ae0511e] .field-body>.field>p.control+.control>.input{border-radius:0 var(--tainacan-input-border-radius, 0) var(--tainacan-input-border-radius, 0) 0 !important}.tainacan-checkbox-list-container[data-v-1ae0511e]{border:1px solid var(--tainacan-gray1);border-top:0px;margin-top:-1px;min-height:232px;display:flex;align-items:center;position:relative;padding:0 20px !important}.tainacan-checkbox-list-container>ul+.tainacan-checkbox-list-page-changer[data-v-1ae0511e]{right:0;left:auto}.tainacan-checkbox-list-page-changer[data-v-1ae0511e]{height:calc(100% - 1px);top:1px;position:absolute;left:0;right:auto;align-items:center;display:flex;background-color:var(--tainacan-gray1)}.tainacan-checkbox-list-page-changer[data-v-1ae0511e]:hover{background-color:var(--tainacan-primary)}.tainacan-modal-checkbox-list-body[data-v-1ae0511e]{-moz-column-count:2;-moz-column-gap:0;-moz-column-rule:none;-webkit-column-count:2;-webkit-column-gap:0;-webkit-column-rule:none;column-count:2;-moz-column-gap:2em;column-gap:2em;column-rule:none;list-style:none;width:100%;margin:0;padding:0 !important;max-height:253px;overflow:auto}.tainacan-tags-container[data-v-1ae0511e]{min-height:64px;padding:0px !important;display:inline}.tainacan-tags-container .tainacan-tags-container--list[data-v-1ae0511e]{display:flex;flex-wrap:wrap;gap:0}.tainacan-tags-container .tags.is-small[data-v-1ae0511e]{font-size:.875em}.tainacan-tags-container section p[data-v-1ae0511e]{font-size:.875em}.tainacan-tags-container[data-v-1ae0511e] .field{padding:.25rem !important;margin:0 !important}.tainacan-modal-checkbox-search-results-body[data-v-1ae0511e]{list-style:none;-moz-column-count:2;-moz-column-gap:0;-moz-column-rule:none;-webkit-column-count:2;-webkit-column-gap:0;-webkit-column-rule:none;column-count:2;-moz-column-gap:2em;column-gap:2em;column-rule:none}.tainacan-li-no-children[data-v-1ae0511e]{padding:3em 1.5em 3em .5em}.tainacan-li-checkbox-last-active[data-v-1ae0511e]{background-color:var(--tainacan-primary)}.tainacan-li-checkbox-parent-active[data-v-1ae0511e]{background-color:var(--tainacan-primary)}.b-checkbox .control-label[data-v-1ae0511e]{display:flex;flex-wrap:nowrap;align-items:center;width:100%;overflow:visible !important;white-space:normal !important}.b-checkbox .control-label .checkbox-label-text[data-v-1ae0511e]{line-height:1.25em;padding-right:3px;-moz-column-break-inside:avoid;break-inside:avoid}.warning-no-more-terms[data-v-1ae0511e]{color:var(--tainacan-info-color);font-size:.75em;padding:.5em;text-align:center}@media screen and (max-width: 768px){.tainacan-modal-checkbox-list-body[data-v-1ae0511e],.tainacan-finder-column.has-only-one-column ul[data-v-1ae0511e],.tainacan-modal-checkbox-search-results-body[data-v-1ae0511e]{-moz-column-count:auto;column-count:auto;overflow-y:auto}.tainacan-modal-checkbox-search-results-body[data-v-1ae0511e],.tainacan-modal-checkbox-list-body[data-v-1ae0511e],.tainacan-finder-columns-container[data-v-1ae0511e]{font-size:1.125em}.tainacan-finder-columns-container[data-v-1ae0511e]{max-height:calc(100vh - 184px - 56px);max-height:calc(100dvh - 184px - 56px)}.tainacan-finder-columns-container .tainacan-finder-column[data-v-1ae0511e],.tainacan-finder-columns-container .tainacan-finder-column ul[data-v-1ae0511e]{max-height:100%}.tainacan-finder-columns-container .tainacan-finder-column[data-v-1ae0511e]{max-width:calc(99vw - var(--tainacan-one-column) - .75em - .75em - 2px);min-width:calc(99vw - var(--tainacan-one-column) - .75em - .75em - 24px)}.tainacan-finder-columns-container .tainacan-finder-column .column-label+ul[data-v-1ae0511e]{max-height:calc(100% - .75em - .45em - .45em - 5px)}.tainacan-finder-columns-container .tainacan-finder-column a[data-v-1ae0511e]{width:3.5em;border-left:1px solid var(--tainacan-gray1);border-bottom:1px solid var(--tainacan-gray1);display:flex;justify-content:center;align-items:center}.tainacan-li-checkbox-list[data-v-1ae0511e]{max-width:calc(100% - 20px) !important}}',""]);const r=l},3326:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(31601),i=a.n(n),o=a(76314),l=a.n(o)()(i());l.push([e.id,"\n.hierarchy-path[data-v-ef170ff2] {\n        color: var(--tainacan-info-color);\n}\n.media-content[data-v-ef170ff2] {\n        display: inline !important;\n}\n",""]);const r=l},7952:(e,t,a)=>{var n=a(85072),i=a.n(n),o=a(97825),l=a.n(o),r=a(77659),c=a.n(r),s=a(55056),u=a.n(s),d=a(10540),m=a.n(d),h=a(63494),p=a.n(h),f=a(1577),b={};b.styleTagTransform=p(),b.setAttributes=u(),b.insert=c().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=m();i()(f.A,b),f.A&&f.A.locals&&f.A.locals},8926:(e,t,a)=>{a.d(t,{F:()=>h,s:()=>m});var n=a(55373),i=a.n(n),o=a(75552),l=a(40834);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return s(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var _n=0,n=function(){};return{s:n,n:function(){return _n>=e.length?{done:!0}:{done:!1,value:e[_n++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var m={data:function(){return{collectionId:"",metadatumId:"",metadatumType:"",metadatumName:"",filterTypeOptions:[],shouldAddOptions:!1}},props:{filter:Object,query:Object,isRepositoryLevel:Boolean,isUsingElasticSearch:Boolean,isLoadingItems:Boolean,currentCollectionId:[Number,String]},created:function(){this.collectionId=this.filter.collection_id?this.filter.collection_id:this.collectionId,this.metadatumId=this.filter.metadatum.metadatum_id?this.filter.metadatum.metadatum_id:this.metadatumId,this.metadatumName=this.filter.metadatum&&this.filter.metadatum.metadatum_name?this.filter.metadatum.metadatum_name:this.metadatumName,this.filterTypeOptions=this.filter.filter_type_options?this.filter.filter_type_options:this.filterTypeOptions,this.metadatumType=this.filter.metadatum.metadata_type_object&&this.filter.metadatum.metadata_type_object.className?this.filter.metadatum.metadata_type_object.className:this.metadatumType},methods:{resetPage:function(){this.$eventBusSearch.resetPageOnStore()}}},h={data:function(){return{getOptionsValuesCancel:void 0,isLoadingOptions:!1,facetSearchPage:1}},emits:["update-parent-collapse"],computed:function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},(0,l.L8)("search",{facetsFromItemSearch:"getFacets"})),watch:{isLoadingItems:{handler:function(){this.isUsingElasticSearch&&(this.isLoadingOptions=this.isLoadingItems)},immediate:!0}},methods:{getValuesPlainText:function(e){var t=this,a=e.metadatumId,n=e.search,l=e.isRepositoryLevel,r=e.valuesToIgnore,c=e.offset,s=e.number,u=e.isInCheckboxModal,d=e.getSelected,m=void 0===d?"0":d,h=e.countItems,p=void 0===h||h;if(u||n||!this.isUsingElasticSearch){var f=o.Ay.CancelToken.source(),b=JSON.parse(JSON.stringify(this.query));null!=b.fetch_only&&delete b.fetch_only;var g={current_query:b},v="";return v=l?"/facets/".concat(a,"?getSelected=").concat(m,"&"):"default"==this.filter.collection_id&&this.currentCollectionId?"/collection/".concat(this.currentCollectionId,"/facets/").concat(a,"?getSelected=").concat(m,"&"):"/collection/".concat(this.filter.collection_id,"/facets/").concat(a,"?getSelected=").concat(m,"&"),null!=c&&null!=s&&(this.isUsingElasticSearch?v+="last_term=".concat(c,"&number=").concat(s,"&"):v+="offset=".concat(c,"&number=").concat(s,"&")),v+=n&&null!=c&&null!=s||n?"search=".concat(n,"&")+i().stringify(g):i().stringify(g),null!=p&&!1===p&&(v+="&count_items=0"),this.isLoadingOptions=!0,new Object({request:new Promise((function(e,a){o.Ay.tainacanApi.get(v,{cancelToken:f.token}).then((function(a){t.isLoadingOptions=!1,a.data.values?t.prepareOptionsForPlainText(a.data.values,n,r,u):t.prepareOptionsForPlainText(a.data,n,r,u),e(a)})).catch((function(e){o.Ay.isCancel(e)?console.log("Request canceled: ",e.message):t.isLoadingOptions=!1,a(e)}))})),source:f})}var y=new Promise((function(e){for(var a in t.facetsFromItemSearch)a==t.filter.id&&(t.prepareOptionsForPlainText(t.facetsFromItemSearch[a],n,r,u),t.$emit("update-parent-collapse",t.facetsFromItemSearch[a].length>0));e()}));return new Object({request:y})},getValuesRelationship:function(e){var t=this,a=e.search,n=e.isRepositoryLevel,l=e.valuesToIgnore,r=e.offset,c=e.number,s=e.isInCheckboxModal,u=e.getSelected,d=void 0===u?"0":u,m=e.countItems,h=void 0===m||m;if(s||a||!this.facetsFromItemSearch||Object.values(this.facetsFromItemSearch).length<=0){var p=o.Ay.CancelToken.source(),f=JSON.parse(JSON.stringify(this.query));null!=f.fetch_only&&delete f.fetch_only;var b={current_query:f},g="";return g=n?"/facets/".concat(this.filter.metadatum.metadatum_id,"?getSelected=").concat(d,"&"):"default"==this.filter.collection_id&&this.currentCollectionId?"/collection/".concat(this.currentCollectionId,"/facets/").concat(this.filter.metadatum.metadatum_id,"?getSelected=").concat(d,"&"):"/collection/".concat(this.filter.collection_id,"/facets/").concat(this.filter.metadatum.metadatum_id,"?getSelected=").concat(d,"&"),g+=null!=r&&null!=c?"offset=".concat(r,"&number=").concat(c):"nopaging=1",a&&(g+="&search=".concat(a)),null!=h&&!1===h&&(g+="&count_items=0"),this.isLoadingOptions=!0,new Object({request:new Promise((function(e,n){o.Ay.tainacanApi.get(g+"&"+i().stringify(b)).then((function(n){t.isLoadingOptions=!1,n.data.values?t.prepareOptionsForRelationship(n.data.values,a,l,s):t.prepareOptionsForRelationship(n.data,a,l,s),e(n)})).catch((function(e){o.Ay.isCancel(e)?console.log("Request canceled: ",e.message):t.isLoadingOptions=!1,n(e)}))})),source:p})}var v=new Promise((function(e){for(var n in t.facetsFromItemSearch)n==t.filter.id&&(t.prepareOptionsForRelationship(t.facetsFromItemSearch[n],a,l,s),t.$emit("update-parent-collapse",t.facetsFromItemSearch[n].length>0));e()}));return new Object({request:v})},prepareOptionsForPlainText:function(e,t,a,n){var i=[],o=[];Array.isArray(e)||(e=Object.values(e));var l,r=c(e);try{var s=function(){var e=l.value;if(null!=a&&a.length>0){var r=a.findIndex((function(t){return t==e.value}));t&&n?i.push({label:e.label,value:e.value,total_items:e.total_items}):r<0&&o.push({label:e.label,value:e.value,total_items:e.total_items})}else t&&n?i.push({label:e.label,value:e.value,total_items:e.total_items}):o.push({label:e.label,value:e.value,total_items:e.total_items})};for(r.s();!(l=r.n()).done;)s()}catch(e){r.e(e)}finally{r.f()}if(!0===this.shouldAddOptions&&this.searchResults&&this.searchResults.length?this.searchResults=this.searchResults.concat(i):this.searchResults=i,o?!0===this.shouldAddOptions&&this.options&&this.options.length?this.options=this.options.concat(o):this.options=o:t||(this.noMorePage=1),this.options.length<this.maxNumOptionsCheckboxList&&!t&&(this.noMorePage=1),this.filter.filter_type_object&&1==this.filter.filter_type_object.use_max_options&&this.filter.max_options&&this.options.length>=this.filter.max_options){var u=!0;this.options.length===this.filter.max_options?this.options[this.filter.max_options-1].showViewAllButton=u:this.options[this.options.length-1].showViewAllButton=u}},prepareOptionsForRelationship:function(e,t,a,n){var i=this,o=[],l=[];if(e.length>0){var r,s=c(e);try{var u=function(){var e=r.value;if(null!=a&&a.length>0){var c=a.findIndex((function(t){return t==e.value}));t&&n?o.push({label:e.label,value:e.value,img:e.thumbnail?i.$thumbHelper.getSrc(e.thumbnail,"tainacan-small"):e.img?e.img:"",total_items:e.total_items}):c<0&&l.push({label:e.label,value:e.value,img:e.thumbnail?i.$thumbHelper.getSrc(e.thumbnail,"tainacan-small"):e.img?e.img:"",total_items:e.total_items})}else t&&n?o.push({label:e.label,value:e.value,img:e.thumbnail?i.$thumbHelper.getSrc(e.thumbnail,"tainacan-small"):e.img?e.img:"",total_items:e.total_items}):l.push({label:e.label,value:e.value,img:e.thumbnail?i.$thumbHelper.getSrc(e.thumbnail,"tainacan-small"):e.img?e.img:"",total_items:e.total_items})};for(s.s();!(r=s.n()).done;)u()}catch(e){s.e(e)}finally{s.f()}}if(!0===this.shouldAddOptions&&this.searchResults&&this.searchResults.length?this.searchResults=this.searchResults.concat(o):this.searchResults=o,l?!0===this.shouldAddOptions&&this.options&&this.options.length?this.options=this.options.concat(l):this.options=l:t||(this.noMorePage=1),this.options.length<this.maxNumOptionsCheckboxList&&(this.noMorePage=1),this.filter.filter_type_object&&1==this.filter.filter_type_object.use_max_options&&this.filter.max_options&&this.options.length>=this.filter.max_options){var d=!0;this.options.length===this.filter.max_options?this.options[this.filter.max_options-1].showViewAllButton=d:this.options[this.options.length-1].showViewAllButton=d}}},beforeUnmount:function(){null!=this.getOptionsValuesCancel&&this.getOptionsValuesCancel.cancel("Facet search Canceled.")}}},11289:(e,t,a)=>{var n=a(85072),i=a.n(n),o=a(97825),l=a.n(o),r=a(77659),c=a.n(r),s=a(55056),u=a.n(s),d=a(10540),m=a.n(d),h=a(63494),p=a.n(h),f=a(26602),b={};b.styleTagTransform=p(),b.setAttributes=u(),b.insert=c().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=m();i()(f.A,b),f.A&&f.A.locals&&f.A.locals},13488:(e,t,a)=>{a.d(t,{A:()=>h});var n=a(6934),i=a(55373),o=a.n(i),l=a(75552);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,i,o,l,r=[],c=!0,s=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;c=!1}else for(;!(c=(n=o.call(a)).done)&&(r.push(n.value),r.length!==t);c=!0);}catch(e){s=!0,i=e}finally{try{if(!c&&null!=a.return&&(l=a.return(),Object(l)!==l))return}finally{if(s)throw i}}return r}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function u(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=d(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var _n=0,n=function(){};return{s:n,n:function(){return _n>=e.length?{done:!0}:{done:!1,value:e[_n++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function d(e,t){if(e){if("string"==typeof e)return m(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}const h={name:"CheckboxRadioMetadataInput",mixins:[a(8926).F],props:{parent:Number,taxonomyId:Number,taxonomy:String,collectionId:[Number,String],metadatumId:Number,metadatum:Object,selected:[Array,String,Number],allowNew:Boolean,isTaxonomy:{type:Boolean,default:!1},metadatumType:String,isRepositoryLevel:Boolean,isCheckbox:{type:Boolean,default:!0},amountSelected:0,maxMultipleValues:void 0,isMobileScreen:!1},emits:["input","mobile-special-focus","show-add-new-term"],data:function(){return{finderColumns:[],itemActive:!1,isColumnLoading:!1,loadingComponent:void 0,totalRemaining:{},hierarchicalPath:[],searchResults:[],optionName:"",isSearching:!1,options:[],maxNumOptionsCheckboxList:20,maxNumSearchResultsShow:20,maxNumOptionsCheckboxFinderColumns:100,checkboxListOffset:0,isCheckboxListLoading:!1,isLoadingSearch:!1,noMorePage:!1,noMoreSearchPage:!1,activeTab:0,selectedTagsName:{},isSelectedTermsLoading:!1,expandResultsSection:!1,hasToDisplaySearchBar:!1}},computed:{shouldShowTabs:function(){return!(this.shouldBeginWithListExpanded&&!this.hasToDisplaySearchBar)},tabs:function(){return[{label:this.isTaxonomy?this.$i18n.get("label_all_terms"):this.$i18n.get("label_all_metadatum_values"),id:"all-items"},{label:(this.isTaxonomy?this.$i18n.get("label_selected_terms"):this.$i18n.get("label_selected_metadatum_values"))+(null!==this.amountSelected&&void 0!==this.amountSelected?" ("+this.amountSelected+")":""),id:"selected-items"}]},shouldBeginWithListExpanded:function(){return this.isTaxonomy&&this.metadatum&&this.metadatum.metadata_type_options&&this.metadatum.metadata_type_options.visible_options_list}},watch:{selected:{handler:function(){this.$emit("input",this.selected)},deep:!0},optionName:function(e,t){e!=t&&(this.noMoreSearchPage=!1,this.checkboxListOffset=0)}},updated:function(){!this.isSearching&&this.isTaxonomy&&this.highlightHierarchyPath()},created:function(){var e=this;this.shouldBeginWithListExpanded&&this.initializeValues(),this.expandResultsSection=this.shouldBeginWithListExpanded,this.$emitter.on("updateTaxonomyInputs",(function(t){t.taxonomyId==e.taxonomyId&&t.metadatumId==e.metadatumId&&(e.finderColumns=[],e.optionName="",e.hierarchicalPath=[],e.isSearching=!1,e.searchResults=[],e.initializeValues(),e.shouldBeginWithListExpanded&&!e.hasToDisplaySearchBar||(e.fetchSelectedLabels(),e.activeTab=1))}))},beforeUnmount:function(){null!=this.getOptionsValuesCancel&&this.getOptionsValuesCancel.cancel("Get options request canceled.")},methods:{setActiveTab:function(e){this.activeTab=e,this.fetchSelectedLabels()},initializeValues:function(){this.maxNumOptionsCheckboxFinderColumns=50,this.isTaxonomy?this.getOptionChildren():(this.isCheckboxListLoading=!0,this.getOptions(0))},shouldShowMoreButton:function(e){return!0===this.totalRemaining[e].remaining||this.finderColumns[e].children.length<this.totalRemaining[e].remaining},fetchSelectedLabels:function(){var e=this,t=this.selected instanceof Array?this.selected:[this.selected],a=t.filter((function(e){return!isNaN(e)})),n=t.filter((function(e){return isNaN(e)}));if(this.taxonomyId){if(a.length&&(this.isSelectedTermsLoading=!0,l.UY.get("/taxonomy/".concat(this.taxonomyId,"/terms/?").concat(o().stringify({hideempty:0,include:a}))).then((function(t){var a,n=u(t.data);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.saveSelectedTagName(i.id,!e.isCheckbox&&i.hierarchy_path?i.hierarchy_path+i.name:i.name,i.url)}}catch(e){n.e(e)}finally{n.f()}e.isSelectedTermsLoading=!1})).catch((function(t){e.$console.log(t),e.isSelectedTermsLoading=!1}))),n){var i,r=u(n);try{for(r.s();!(i=r.n()).done;){var c=i.value;this.saveSelectedTagName(c,c.split(">")[c.split(">").length-1],"")}}catch(e){r.e(e)}finally{r.f()}}}else"Tainacan\\Metadata_Types\\Relationship"===this.metadatumType&&a.length&&(this.isSelectedTermsLoading=!0,l.UY.get("/items/?".concat(o().stringify({fetch_only:"title",postin:a}))).then((function(t){var a,n=u(t.data.items);try{for(n.s();!(a=n.n()).done;){var i=a.value;e.saveSelectedTagName(i.id,i.title,i.url)}}catch(e){n.e(e)}finally{n.f()}e.isSelectedTermsLoading=!1})).catch((function(t){e.$console.log(t),e.isSelectedTermsLoading=!1})))},saveSelectedTagName:function(e,t,a){this.selectedTagsName[e]||Object.assign(this.selectedTagsName,s({},"".concat(e),a?"<a href="+a+' target="_blank">'+t+"</a>":t))},previousPage:function(){this.noMorePage=!1,this.isCheckboxListLoading=!0,this.checkboxListOffset-=this.maxNumOptionsCheckboxList,this.checkboxListOffset<0&&(this.checkboxListOffset=0),this.getOptions(this.checkboxListOffset)},previousSearchPage:function(){this.noMoreSearchPage=!1,this.isCheckboxListLoading=!0,this.checkboxListOffset-=this.maxNumSearchResultsShow,this.checkboxListOffset<0&&(this.checkboxListOffset=0),this.autoComplete()},nextPage:function(){this.noMorePage||(this.checkboxListOffset===this.maxNumOptionsCheckboxList?this.checkboxListOffset+=this.maxNumOptionsCheckboxList-1:this.checkboxListOffset+=this.maxNumOptionsCheckboxList),this.isCheckboxListLoading=!0,this.getOptions(this.checkboxListOffset)},nextSearchPage:function(){this.noMoreSearchPage||(this.checkboxListOffset===this.maxNumSearchResultsShow?this.checkboxListOffset+=this.maxNumSearchResultsShow-1:this.checkboxListOffset+=this.maxNumSearchResultsShow),this.isCheckboxListLoading=!0,this.autoComplete()},getOptions:function(e){var t=this,a="";null!=this.getOptionsValuesCancel&&this.getOptionsValuesCancel.cancel("Facet search Canceled."),(a="Tainacan\\Metadata_Types\\Relationship"===this.metadatumType?this.getValuesRelationship({search:this.optionName,isRepositoryLevel:this.isRepositoryLevel,valuesToIgnore:[],offset:e,number:this.maxNumOptionsCheckboxList,isInCheckboxModal:!0,countItems:!1}):this.getValuesPlainText({metadatumId:this.metadatumId,search:this.optionName,isRepositoryLevel:this.isRepositoryLevel,valuesToIgnore:[],offset:e,number:this.maxNumOptionsCheckboxList,isInCheckboxModal:!0,countItems:!1})).request.then((function(e){t.isCheckboxListLoading=!1,t.isLoadingSearch=!1,t.hasToDisplaySearchBar=!t.isSearching&&(t.hasToDisplaySearchBar||e.headers["x-wp-totalpages"]>1)})).catch((function(e){(0,l.FZ)(e)?t.$console.log("Request canceled: "+e.message):t.$console.error(e)})),this.getOptionsValuesCancel=a.source},autoComplete:_.debounce((function(){var e=this;if(this.isSearching=!!this.optionName.length,this.isSearching)if(this.isTaxonomy){this.isLoadingSearch=!0;var t="?order=asc&number=".concat(this.maxNumSearchResultsShow,"&search=").concat(this.optionName,"&hideempty=0&offset=").concat(this.checkboxListOffset,"&count_items=0"),a="/collection/".concat(this.collectionId,"/facets/").concat(this.metadatumId).concat(t);"default"==this.collectionId&&(a="/facets/".concat(this.metadatumId).concat(t)),l.UY.get(a).then((function(t){e.searchResults=t.data.values,e.isLoadingSearch=!1,t.headers&&t.headers["x-wp-total"]&&(e.noMoreSearchPage=t.headers["x-wp-total"]<=e.checkboxListOffset+e.searchResults.length)})).catch((function(t){e.$console.log(t)}))}else this.isLoadingSearch=!0,this.getOptions(0)}),500),highlightHierarchyPath:function(){var e,t=u(this.hierarchicalPath.entries());try{for(t.s();!(e=t.n()).done;){var a=c(e.value,2),n=a[0],i=a[1],o=this.$refs["".concat(i.column,".").concat(i.element,"-tainacan-li-checkbox-model")];if(o&&o[0]&&o[0].$el){var l=o[0].$el;n==this.hierarchicalPath.length-1?l.classList.add("tainacan-li-checkbox-last-active"):l.classList.add("tainacan-li-checkbox-parent-active")}}}catch(e){t.e(e)}finally{t.f()}},addToHierarchicalPath:function(e,t,a){var n=void 0,i={column:e,element:t,option:a};for(var o in this.hierarchicalPath)if(this.hierarchicalPath[o].column==e){n=o;break}null!=n?(this.removeHighlightNotSelectedLevels(),this.hierarchicalPath.splice(n),this.hierarchicalPath.splice(n,1,i)):this.hierarchicalPath.push(i),this.highlightHierarchyPath()},removeHighlightNotSelectedLevels:function(){var e,t=u(this.hierarchicalPath);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(this.$refs["".concat(a.column,".").concat(a.element,"-tainacan-li-checkbox-model")][0]){var n=this.$refs["".concat(a.column,".").concat(a.element,"-tainacan-li-checkbox-model")][0].$el;n.classList.remove("tainacan-li-checkbox-last-active"),n.classList.remove("tainacan-li-checkbox-parent-active")}}}catch(e){t.e(e)}finally{t.f()}},removeLevelsAfter:function(e){null!=e&&(this.finderColumns.length=e+1)},createColumn:function(e,t,a){var i=this,o=e.data.values;this.totalRemaining=Object.assign({},this.totalRemaining,s({},"".concat(null==t?0:t+1),{remaining:e.headers["x-wp-total"]}));var l=void 0;if(o.length>0)for(var r in this.finderColumns)if(this.finderColumns[r].children[0].value==o[0].value){l=r;break}var c=void 0===l,u=void 0!==l?l:this.finderColumns.length;null!=l?this.finderColumns.splice(l,1,{label:a,children:o,lastTerm:e.data.last_term.es_term}):this.finderColumns.push({label:a,children:o,lastTerm:e.data.last_term.es_term}),(0,n.dY)((function(){setTimeout((function(){i.$refs&&i.$refs["".concat(u,".0-tainacan-li-checkbox-model")]&&i.$refs["".concat(u,".0-tainacan-li-checkbox-model")][0]&&i.$refs["".concat(u,".0-tainacan-li-checkbox-model")][0].$el&&i.$refs["tainacan-finder-scrolling-container"]&&i.$refs["tainacan-finder-scrolling-container"].$el&&i.$refs["tainacan-finder-scrolling-container"].$el.scrollTo({top:0,left:null!=l?0:i.$refs["".concat(u,".0-tainacan-li-checkbox-model")][0].$el.offsetLeft,behavior:"smooth"})}),500);var e=void 0!==t;if(c&&o.length>0&&e){var a="".concat(u,".0-tainacan-li-checkbox-model");if(i.$refs[a]&&i.$refs[a][0]){var n=i.$refs[a][0].$el.querySelector('input[type="'.concat(i.isCheckbox?"checkbox":"radio",'"]'));n&&setTimeout((function(){n.focus()}),600)}}}))},appendMore:function(e,t,a){var n,i=u(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;this.finderColumns[t].children.push(o)}}catch(e){i.e(e)}finally{i.f()}this.finderColumns[t].lastTerm=a},toggleResultsSection:function(){this.expandResultsSection||this.initializeValues(),this.expandResultsSection=!this.expandResultsSection,this.expandResultsSection||(this.isSearching=!1,this.optionName="")},getOptionChildren:function(e,t,a){var n=this;null!=t&&this.addToHierarchicalPath(t,a,e);var i=0;e&&(i=e.value);var o="?order=asc&parent=".concat(i,"&number=").concat(this.maxNumOptionsCheckboxFinderColumns,"&offset=0&hideempty=0&count_items=0");this.isColumnLoading=!0;var r="/collection/".concat(this.collectionId,"/facets/").concat(this.metadatumId).concat(o);"default"==this.collectionId&&(r="/facets/".concat(this.metadatumId).concat(o)),l.UY.get(r).then((function(i){n.hasToDisplaySearchBar=!n.isSearching&&(n.hasToDisplaySearchBar||i.headers["x-wp-totalpages"]>1||i.data.values.some((function(e){return null!=e.total_children&&0!=e.total_children}))),n.removeLevelsAfter(t),n.createColumn(i,t,e?e.label:null),n.isColumnLoading=!1,void 0===e&&void 0===t&&void 0===a&&(Array.isArray(n.selected)?n.selected.length:n.selected)&&"yes"!=n.metadatum.multiple&&n.hasToDisplaySearchBar&&(n.fetchSelectedLabels(),n.activeTab=1)})).catch((function(e){n.$console.log(e),n.isColumnLoading=!1}))},getMoreOptions:function(e,t){var a=this;if(e.children&&e.children.length>0){var n=e.children[0].parent,i=e.children.length,o="?order=asc&parent=".concat(n,"&number=").concat(this.maxNumOptionsCheckboxFinderColumns,"&offset=").concat(i,"&hideempty=0&count_items=0");e.lastTerm&&(o+="&last_term="+encodeURIComponent(e.lastTerm)),this.isColumnLoading=!0;var r="/collection/".concat(this.collectionId,"/facets/").concat(this.metadatumId).concat(o);"default"==this.collectionId&&(r="/facets/".concat(this.metadatumId).concat(o)),l.UY.get(r).then((function(e){a.appendMore(e.data.values,t,e.data.last_term.es_term),a.hasToDisplaySearchBar=!a.isSearching&&(a.hasToDisplaySearchBar||e.headers["x-wp-totalpages"]>1||e.data.values.some((function(e){return null!=e.total_children&&0!=e.total_children}))),a.totalRemaining=Object.assign({},a.totalRemaining,s({},"".concat(t),{remaining:e.headers["x-wp-total"]})),a.isColumnLoading=!1})).catch((function(e){a.$console.log(e),a.isColumnLoading=!1}))}},renderHierarchicalPath:function(e,t){return'<span style="color: var(--tainacan-info-color);">'+e.replace(/>/g,'&nbsp;<span class="hierarchy-separator"> &gt; </span>&nbsp;')+"</span>"+t},onMobileSpecialFocus:function(e){e.target.blur(),this.$emit("mobile-special-focus")},isOptionSelected:function(e){return Array.isArray(this.selected)?this.selected.indexOf(isNaN(Number(e))?e:Number(e))>=0:e==this.selected},getOptionValue:function(e){return isNaN(Number(e))?e:Number(e)},updateLocalSelection:function(e){var t=this.isCheckbox?this.selected:Array.isArray(this.selected)?this.selected[0]:this.selected;if(Array.isArray(t)){var a=this.selected.indexOf(isNaN(Number(e))?e:Number(e));a>=0?t.splice(a,1):t.push(isNaN(Number(e))?e:Number(e))}else t=e!=t&&(isNaN(Number(e))?e:Number(e));this.$emit("input",t)}}}},22299:(e,t,a)=>{a.d(t,{X:()=>n.X});var n=a(94470)},24750:(e,t,a)=>{a(11289)},24927:(e,t,a)=>{a.d(t,{A:()=>u});var n=a(40834);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return l(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var _n=0,n=function(){};return{s:n,n:function(){return _n>=e.length?{done:!0}:{done:!1,value:e[_n++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return o=e.done,e},e:function(e){r=!0,i=e},f:function(){try{o||null==a.return||a.return()}finally{if(r)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const u={props:{itemMetadatum:Object,value:[Number,String,Array],allowNew:Boolean,taxonomyId:Number,disabled:!1,maxtags:"",isLastMetadatum:!1},emits:["update:value","show-add-new-term"],data:function(){return{selected:[],options:[],isFetching:!1,offset:0,searchName:"",totalTerms:0}},computed:{maxMultipleValues:function(){return this.itemMetadatum&&this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.cardinality&&!isNaN(this.itemMetadatum.metadatum.cardinality)&&this.itemMetadatum.metadatum.cardinality>1?this.itemMetadatum.metadatum.cardinality:void 0},hideHierarchyPath:function(){return!!(this.itemMetadatum&&this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.metadata_type_options&&this.itemMetadatum.metadatum.metadata_type_options.hide_hierarchy_path&&"yes"===this.itemMetadatum.metadatum.metadata_type_options.hide_hierarchy_path)}},watch:{value:function(){this.value&&this.value.length>0&&this.value[0].label&&(this.selected=JSON.parse(JSON.stringify(this.value)))}},mounted:function(){this.value&&this.value.length>0&&this.value[0].label&&(this.selected=JSON.parse(JSON.stringify(this.value)))},methods:c(c({},(0,n.i0)("taxonomy",["fetchTerms"])),{},{search:_.debounce((function(e){var t=this;if(e!=this.searchName&&(this.searchName=e,this.options=[],this.offset=0),!e.length)return this.searchName=e,this.options=[],void(this.offset=0);if(!(this.offset>0&&this.options.length>=this.totalTerms)){this.isFetching=!0;var a={taxonomyId:this.taxonomyId,fetchOnly:{fetch_only:{0:"name",1:"id"}},search:{searchterm:this.searchName},all:!0,order:"asc",offset:this.offset,number:12,exclude:this.selected.map((function(e){return e.value}))};this.hideHierarchyPath||delete a.fetchOnly,this.fetchTerms(a).then((function(e){var a,n=o(e.terms);try{for(n.s();!(a=n.n()).done;){var i=a.value;t.options.push({label:i.name,value:i.id,hierarchy_path:!!i.hierarchy_path&&i.hierarchy_path.replace(">"," > ")})}}catch(e){n.e(e)}finally{n.f()}t.offset+=12,t.totalTerms=e.total,t.isFetching=!1})).catch((function(e){throw t.isFetching=!1,e}))}}),500),searchMore:_.debounce((function(){this.search(this.searchName)}),250),updateSelectedValues:function(){var e,t=[],a=o(this.value);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push({label:n.label,value:n.value})}}catch(e){a.e(e)}finally{a.f()}this.selected=t},emitAdd:function(){var e=this.selected,t=[];if(e.length>0){var a,n=o(e);try{for(n.s();!(a=n.n()).done;){var i=a.value;t.push(i.value)}}catch(e){n.e(e)}finally{n.f()}this.$emit("update:value",t)}},emitRemove:function(){var e,t=[],a=o(this.selected);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.push(n.value)}}catch(e){a.e(e)}finally{a.f()}this.$emit("update:value",t)}})}},26602:(e,t,a)=>{a.d(t,{A:()=>r});var n=a(31601),i=a.n(n),o=a(76314),l=a.n(o)()(i());l.push([e.id,"\n.add-new-term[data-v-3f1b1595] {\n        margin: 3px 0;\n        font-size: 0.75em;\n}\n",""]);const r=l},29386:(e,t,a)=>{a.d(t,{A:()=>n.A});var n=a(74592)},49224:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(93923),i=a(57259);a(60517);const o=(0,a(66262).A)(i.A,[["render",n.X],["__scopeId","data-v-1ae0511e"]])},57259:(e,t,a)=>{a.d(t,{A:()=>n.A});var n=a(13488)},60517:(e,t,a)=>{a(7952)},70722:(e,t,a)=>{var n=a(85072),i=a.n(n),o=a(97825),l=a.n(o),r=a(77659),c=a.n(r),s=a(55056),u=a.n(s),d=a(10540),m=a.n(d),h=a(63494),p=a.n(h),f=a(3326),b={};b.styleTagTransform=p(),b.setAttributes=u(),b.insert=c().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=m();i()(f.A,b),f.A&&f.A.locals&&f.A.locals},74592:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(91765),i=a(49224),o=a(75552),l=a(40834),r=a(6934);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){d(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const m={components:{TainacanTaxonomyTagInput:n.A,CheckboxRadioMetadataInput:i.A,TermEditionForm:(0,r.$V)((function(){return Promise.all([a.e(8901),a.e(4039)]).then(a.bind(a,19376))}))},props:{itemMetadatum:Object,value:[Number,String,Array,Object],disabled:!1,forcedComponentType:"",maxtags:"",allowNew:!1,isMobileScreen:!1},emits:["updateTaxonomyInputs","mobile-special-focus","update:value"],data:function(){return{valueComponent:null,taxonomyId:"",taxonomy:"",terms:[],isAddingNewTermVaue:!1,isTermCreationModalOpen:!1,isTermCreationPanelOpen:!1,newTermName:"",allowNewFromOptions:!1,isFetchingTerms:!1}},computed:{getComponent:function(){return this.forcedComponentType?this.forcedComponentType:this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.metadata_type_options&&this.itemMetadatum.metadatum.metadata_type_options.input_type?this.itemMetadatum.metadatum.metadata_type_options.input_type:""},displayCreateNewTerm:function(){return this.allowNewFromOptions},isOnItemSubmissionForm:function(){return!this.itemMetadatum.item||!this.itemMetadatum.item.id},maxMultipleValues:function(){return this.itemMetadatum&&this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.cardinality&&!isNaN(this.itemMetadatum.metadatum.cardinality)&&this.itemMetadatum.metadatum.cardinality>1?this.itemMetadatum.metadatum.cardinality:void 0},isHierarchical:function(){return!(this.itemMetadatum.metadatum&&this.itemMetadatum.metadatum.metadata_type_object&&this.itemMetadatum.metadatum.metadata_type_object.options&&this.itemMetadatum.metadatum.metadata_type_object.options.hierarchical)||"no"!==this.itemMetadatum.metadatum.metadata_type_object.options.hierarchical}},watch:{valueComponent:{handler:function(e){this.$emit("update:value",e)},deep:!0}},created:function(){var e=this.itemMetadatum.metadatum.metadata_type_options;this.taxonomyId=e.taxonomy_id,this.taxonomy=e.taxonomy,this.allowNewFromOptions=!1!==this.allowNew&&("yes"==e.allow_new_terms&&(!this.$userCaps||this.$userCaps.hasCapability("tnc_rep_edit_taxonomies"))),this.getTermsId()},methods:u(u({},(0,l.i0)("taxonomy",["fetchTerms"])),{},{getTermsId:function(){var e=this,t=[];if(this.value&&this.itemMetadatum.metadatum&&"tainacan-taxonomy-tag-input"!=this.getComponent)t=this.value.map((function(e){return e.id})).filter((function(e){return void 0!==e})),this.valueComponent=t.length>0&&this.itemMetadatum.metadatum&&"no"===this.itemMetadatum.metadatum.multiple?t[0]:t;else if(this.value&&this.itemMetadatum.metadatum&&"tainacan-taxonomy-tag-input"==this.getComponent){var a=Array.isArray(this.value)?this.value:[this.value];a[0]&&a[0]&&a[0].id?(t=a.map((function(e){return{label:e.name,value:e.id}})),this.valueComponent=t):a.length>0?(this.isFetchingTerms=!0,this.fetchTerms({taxonomyId:this.taxonomyId,fetchOnly:{fetch_only:{0:"name",1:"id"}},all:!0,include:a}).then((function(a){t=a.terms.map((function(e){return{label:e.name,value:e.id}})),e.valueComponent=t,e.isFetchingTerms=!1})).catch((function(t){throw e.isFetchingTerms=!1,t}))):this.valueComponent=[]}},addRecentlyCreatedTerm:function(e){var t=this;if(e&&e.id){this.isAddingNewTermVaue=!0;var a=this.valueComponent;Array.isArray(a)&&0!=a.length||"no"!==this.itemMetadatum.metadatum.multiple?((a=a||[]).push("tainacan-taxonomy-checkbox"==this.getComponent||"tainacan-taxonomy-radio"==this.getComponent?e.id:{label:e.name,value:e.id}),o.UY.put("/item/".concat(this.itemMetadatum.item.id,"/metadata/").concat(this.itemMetadatum.metadatum.id),{values:a}).then((function(){t.isAddingNewTermVaue=!1,t.valueComponent=a,t.$emitter.emit("updateTaxonomyInputs",{taxonomyId:t.taxonomyId,metadatumId:t.itemMetadatum.metadatum.id})}))):o.UY.put("/item/".concat(this.itemMetadatum.item.id,"/metadata/").concat(this.itemMetadatum.metadatum.id),{values:e.id}).then((function(){t.isAddingNewTermVaue=!1,t.valueComponent=e.id,t.$emitter.emit("updateTaxonomyInputs",{taxonomyId:t.taxonomyId,metadatumId:t.itemMetadatum.metadatum.id})}))}},addTermToBeCreated:function(e){this.isTermCreationPanelOpen=!1,"no"===this.itemMetadatum.metadatum.multiple?this.valueComponent=e.parent?e.parent+">>"+e.name:e.name:this.valueComponent.push(e.parent?e.parent+">>"+e.name:e.name),this.$emitter.emit("updateTaxonomyInputs",{taxonomyId:this.taxonomyId,metadatumId:this.itemMetadatum.metadatum.id})},openTermCreationModal:function(e){this.newTermName=e.name,this.isOnItemSubmissionForm?this.isTermCreationPanelOpen=!0:this.isTermCreationModalOpen=!0},onMobileSpecialFocus:function(){this.$emit("mobile-special-focus")}})}},76630:(e,t,a)=>{a.d(t,{X:()=>n.X});var n=a(85795)},85795:(e,t,a)=>{a.d(t,{X:()=>r});var n=a(6934),i={class:"media"},o={class:"media-content"},l={key:0,class:"hierarchy-path"};function r(e,t,a,r,c,s){var u=(0,n.g2)("b-taginput");return(0,n.uX)(),(0,n.Wv)(u,{id:"tainacan-item-metadatum_id-"+a.itemMetadatum.metadatum.id+(a.itemMetadatum.parent_meta_id?"_parent_meta_id-"+a.itemMetadatum.parent_meta_id:""),modelValue:c.selected,"onUpdate:modelValue":t[1]||(t[1]=function(e){return c.selected=e}),expanded:"",disabled:a.disabled,size:"is-small",icon:"magnify",data:c.options,maxtags:null!=a.maxtags?Number(a.maxtags):"yes"==a.itemMetadatum.metadatum.multiple||!0===a.allowNew?void 0!==s.maxMultipleValues?Number(s.maxMultipleValues):null:1,field:"label","remove-on-keys":[],"dropdown-position":a.isLastMetadatum?"top":"auto",attached:"",ellipsis:"","aria-close-label":e.$i18n.get("remove_value"),placeholder:a.itemMetadatum.metadatum.placeholder?a.itemMetadatum.metadatum.placeholder:e.$i18n.get("instruction_type_existing_term"),loading:c.isFetching,class:(0,n.C4)({"has-selected":null!=c.selected&&c.selected!=[]}),autocomplete:"","check-infinite-scroll":"","has-counter":!1,"append-to-body":!a.itemMetadatum.item,"open-on-focus":!1,onAdd:s.emitAdd,onRemove:s.emitRemove,onTyping:s.search,onInfiniteScroll:s.searchMore},(0,n.eX)({default:(0,n.k6)((function(e){return[(0,n.Lk)("div",i,[(0,n.Lk)("div",o,[e.option.hierarchy_path?((0,n.uX)(),(0,n.CE)("span",l,(0,n.v_)(e.option.hierarchy_path),1)):(0,n.Q3)("",!0),(0,n.eW)(" "+(0,n.v_)(e.option.label),1)])])]})),_:2},[!c.isFetching&&c.options.length<=0&&c.searchName.length>0?{name:"empty",fn:(0,n.k6)((function(){return[(0,n.eW)((0,n.v_)(e.$i18n.get("info_no_terms_found")),1)]})),key:"0"}:void 0,a.allowNew&&!c.isFetching&&c.searchName.length>0?{name:"footer",fn:(0,n.k6)((function(){return[(0,n.Lk)("a",{onClick:t[0]||(t[0]=function(t){return e.$emit("show-add-new-term",{name:c.searchName})})},(0,n.v_)(e.$i18n.get("label_create_new_term")+' "'+c.searchName+'"'),1)]})),key:"1"}:void 0]),1032,["id","modelValue","disabled","data","maxtags","dropdown-position","aria-close-label","placeholder","loading","class","append-to-body","onAdd","onRemove","onTyping","onInfiniteScroll"])}},87156:(e,t,a)=>{a.d(t,{X:()=>Y});var n=a(6934);function i(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var l={class:"tainacan-form"},r={key:0,class:"tabs is-small"},c={"aria-orientation":"horizontal",role:"tablist"},s=["id","aria-controls","aria-selected","tabindex","onClick","onKeydown"],u={class:"tab-content"},d=["role","aria-labelledby"],m={key:0,class:"control"},h={class:"icon is-left has-text-dark"},p=["aria-label"],f={class:"tainacan-modal-checkbox-list-body"},b=["disabled","checked","value","type"],g={class:"control-label"},v=["innerHTML"],y={key:1,class:"tainacan-li-checkbox-list result-info"},x={key:2,class:"tainacan-li-checkbox-list result-info"},k=["aria-label"],w=["aria-label"],_={class:"tainacan-modal-checkbox-list-body"},S=["disabled","checked","value","type"],C={class:"control-label"},O={class:"checkbox-label-text"},T=["aria-label"],L=["aria-label"],M=["id"],N={key:1},A=["onClick"],I=["disabled","checked","value","type"],P={class:"control-label"},$={class:"checkbox-label-text"},j=["onClick","onKeydown"],R={key:0,class:"is-hidden-mobile"},F={key:1},E={class:"sr-only"},V={key:0},X=["onClick"],B={key:4,class:"section"},D={class:"content has-text-dark has-text-centered"},z={class:"icon is-medium"},Q=["role","aria-labelledby"],H={key:0,class:"modal-card-body tainacan-tags-container"},U={class:"tainacan-tags-container--list"},W=["innerHTML"],K={key:0,class:"section"},q={class:"content has-text-dark has-text-centered"},J={class:"icon is-medium"};function Y(e,t,a,o,Y,G){var Z=(0,n.g2)("b-button"),ee=(0,n.g2)("b-input"),te=(0,n.g2)("b-field"),ae=(0,n.g2)("b-loading"),ne=(0,n.g2)("b-tag"),ie=(0,n.gN)("a11y-tabs"),oe=(0,n.gN)("tooltip");return(0,n.uX)(),(0,n.CE)("div",l,[(0,n.Lk)("input",{type:"text","aria-hidden":"true",class:"is-special-hidden-for-mobile",tabindex:"-1",autocomplete:"on",onFocus:t[0]||(t[0]=function(){return G.onMobileSpecialFocus&&G.onMobileSpecialFocus.apply(G,arguments)})},null,32),(0,n.Lk)("div",{class:(0,n.C4)([{"hidden-tabs-section":!G.shouldShowTabs},"b-tabs is-small"])},[G.shouldShowTabs?((0,n.uX)(),(0,n.CE)("nav",r,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("ul",c,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(G.tabs,(function(e,t){return(0,n.uX)(),(0,n.CE)("li",{key:t,tabindex:"-1",class:(0,n.C4)({"is-active":Y.activeTab===t})},[(0,n.Lk)("a",{id:"".concat(e.id,"-label"),role:"tab","aria-controls":"".concat(e.id,"-content"),"aria-selected":Y.activeTab===t,tabindex:Y.activeTab===t?0:-1,onClick:function(e){return G.setActiveTab(t)},onKeydown:[(0,n.jR)((0,n.D$)((function(e){return G.setActiveTab(t)}),["prevent"]),["enter"]),(0,n.jR)((0,n.D$)((function(e){return G.setActiveTab(t)}),["prevent"]),["space"])]},[(0,n.Lk)("span",null,(0,n.v_)(e.label),1)],40,s)],2)})),128))])),[[ie]])])):(0,n.Q3)("",!0),(0,n.Lk)("section",u,[0===Y.activeTab?((0,n.uX)(),(0,n.CE)("div",{key:0,id:"all-items-content",class:"tab-item",role:G.shouldShowTabs?"tabpanel":void 0,"aria-labelledby":G.shouldShowTabs?"all-items-label":void 0},[!G.shouldBeginWithListExpanded||Y.hasToDisplaySearchBar?((0,n.uX)(),(0,n.Wv)(te,{key:0,class:"is-clearfix tainacan-checkbox-search-section"},{default:(0,n.k6)((function(){return[G.shouldBeginWithListExpanded?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("p",m,[(0,n.bF)(Z,{class:(0,n.C4)([{"is-active":Y.expandResultsSection},"button"]),onClick:t[1]||(t[1]=function(e){return G.toggleResultsSection()})},{default:(0,n.k6)((function(){return[(0,n.Lk)("span",h,[(0,n.Lk)("i",{class:(0,n.C4)(["tainacan-icon tainacan-icon-1-25em",a.isTaxonomy?"tainacan-icon-taxonomies":"tainacan-icon-view-table"])},null,2)])]})),_:1},8,["class"])])),(0,n.bF)(ee,{modelValue:Y.optionName,"onUpdate:modelValue":[t[2]||(t[2]=function(e){return Y.optionName=e}),G.autoComplete],expanded:"",autocomplete:"on",placeholder:a.metadatum.placeholder?a.metadatum.placeholder:Y.expandResultsSection?e.$i18n.get("instruction_search"):e.$i18n.get("instruction_click_to_see_or_search"),"aria-label":Y.expandResultsSection?e.$i18n.get("instruction_search"):e.$i18n.get("instruction_click_to_see_or_search"),"icon-right":"magnify",type:"search",onFocus:t[3]||(t[3]=function(e){return G.shouldBeginWithListExpanded||Y.expandResultsSection?null:G.toggleResultsSection()})},null,8,["modelValue","placeholder","aria-label","onUpdate:modelValue"])]})),_:1})):(0,n.Q3)("",!0),Y.isSearching?((0,n.uX)(),(0,n.CE)("div",{key:1,style:(0,n.Tr)({height:Y.expandResultsSection?"auto":"0px"}),class:"modal-card-body tainacan-checkbox-list-container"},[Y.checkboxListOffset?((0,n.uX)(),(0,n.CE)("a",{key:0,role:"button",tabindex:"0","aria-label":e.$i18n.get("previous"),class:"tainacan-checkbox-list-page-changer",onClick:t[4]||(t[4]=function(){return G.previousSearchPage&&G.previousSearchPage.apply(G,arguments)})},i(t[22]||(t[22]=[(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-previous"})],-1)])),8,p)):(0,n.Q3)("",!0),(0,n.Lk)("ul",f,[Y.searchResults.length?((0,n.uX)(!0),(0,n.CE)(n.FK,{key:0},(0,n.pI)(Y.searchResults,(function(e,i){return(0,n.uX)(),(0,n.CE)("li",{key:i,class:"tainacan-li-checkbox-list"},[(0,n.Lk)("label",{class:(0,n.C4)({"b-checkbox checkbox":a.isCheckbox,"b-radio radio":!a.isCheckbox,"is-disabled":!G.isOptionSelected(e.value)&&void 0!==a.maxMultipleValues&&a.maxMultipleValues-1<a.selected.length})},[(0,n.Lk)("input",{disabled:!G.isOptionSelected(e.id?e.id:e.value)&&void 0!==a.maxMultipleValues&&a.maxMultipleValues-1<a.selected.length,checked:G.isOptionSelected(e.id?e.id:e.value),value:e.id?G.getOptionValue(e.id):G.getOptionValue(e.value),type:a.isCheckbox?"checkbox":"radio",onInput:t[5]||(t[5]=function(e){return G.updateLocalSelection(e.target.value)})},null,40,b),t[23]||(t[23]=(0,n.Lk)("span",{class:"check"},null,-1)),(0,n.Lk)("span",g,[(0,n.bo)((0,n.Lk)("span",{class:"checkbox-label-text",innerHTML:"".concat(e.name?e.name:e.label?e.hierarchy_path?G.renderHierarchicalPath(e.hierarchy_path,e.label):e.label:"")},null,8,v),[[oe,{content:e.description,autoHide:!0,html:!0,placement:"auto-start",popperClass:["tainacan-tooltip","tooltip"]}]])])],2)])})),128)):(0,n.Q3)("",!0),Y.isLoadingSearch||Y.searchResults.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",y,(0,n.v_)(e.$i18n.get("info_no_terms_found")),1)),Y.isLoadingSearch||!a.allowNew||Y.searchResults.length?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("li",x,[(0,n.Lk)("a",{onClick:t[6]||(t[6]=function(t){return e.$emit("show-add-new-term",{name:Y.optionName})})},(0,n.v_)(e.$i18n.get("label_create_new_term")+' "'+Y.optionName+'"'),1)])),(0,n.bF)(ae,{modelValue:Y.isLoadingSearch,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Y.isLoadingSearch=e}),"is-full-page":!1},null,8,["modelValue"])]),Y.noMoreSearchPage?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("a",{key:1,role:"button",tabindex:"0","aria-label":e.$i18n.get("next"),class:"tainacan-checkbox-list-page-changer",onClick:t[8]||(t[8]=function(){return G.nextSearchPage&&G.nextSearchPage.apply(G,arguments)}),onKeydown:[t[9]||(t[9]=(0,n.jR)((0,n.D$)((function(){return G.nextSearchPage&&G.nextSearchPage.apply(G,arguments)}),["prevent"]),["enter"])),t[10]||(t[10]=(0,n.jR)((0,n.D$)((function(){return G.nextSearchPage&&G.nextSearchPage.apply(G,arguments)}),["prevent"]),["space"]))]},i(t[24]||(t[24]=[(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-next"})],-1)])),40,k))],4)):(0,n.Q3)("",!0),Y.isSearching||a.isTaxonomy?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",{key:2,style:(0,n.Tr)({height:Y.expandResultsSection?"auto":"0px"}),class:"modal-card-body tainacan-checkbox-list-container"},[Y.checkboxListOffset?((0,n.uX)(),(0,n.CE)("a",{key:0,role:"button",tabindex:"0","aria-label":e.$i18n.get("previous"),class:"tainacan-checkbox-list-page-changer",onClick:t[11]||(t[11]=function(){return G.previousPage&&G.previousPage.apply(G,arguments)}),onKeydown:[t[12]||(t[12]=(0,n.jR)((0,n.D$)((function(){return G.previousPage&&G.previousPage.apply(G,arguments)}),["prevent"]),["enter"])),t[13]||(t[13]=(0,n.jR)((0,n.D$)((function(){return G.previousPage&&G.previousPage.apply(G,arguments)}),["prevent"]),["space"]))]},i(t[25]||(t[25]=[(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-previous"})],-1)])),40,w)):(0,n.Q3)("",!0),(0,n.Lk)("ul",_,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Y.options,(function(e,i){return(0,n.uX)(),(0,n.CE)("li",{key:i,class:"tainacan-li-checkbox-list"},[(0,n.Lk)("label",{class:(0,n.C4)({"b-checkbox checkbox":a.isCheckbox,"b-radio radio":!a.isCheckbox,"is-disabled":!G.isOptionSelected(e.value)&&void 0!==a.maxMultipleValues&&a.maxMultipleValues-1<a.selected.length})},[(0,n.Lk)("input",{disabled:!G.isOptionSelected(e.value)&&void 0!==a.maxMultipleValues&&a.maxMultipleValues-1<a.selected.length,checked:G.isOptionSelected(e.value),value:G.getOptionValue(e.value),type:a.isCheckbox?"checkbox":"radio",onInput:t[14]||(t[14]=function(e){return G.updateLocalSelection(e.target.value)})},null,40,S),t[26]||(t[26]=(0,n.Lk)("span",{class:"check"},null,-1)),(0,n.Lk)("span",C,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("span",O,[(0,n.eW)((0,n.v_)("".concat(e.label?e.label:"")),1)])),[[oe,{content:e.description,autoHide:!0,html:!0,placement:"auto-start",popperClass:["tainacan-tooltip","tooltip"]}]])])],2)])})),128)),(0,n.bF)(ae,{modelValue:Y.isCheckboxListLoading,"onUpdate:modelValue":t[15]||(t[15]=function(e){return Y.isCheckboxListLoading=e}),"is-full-page":!1},null,8,["modelValue"])]),Y.noMorePage?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("a",{key:1,role:"button",tabindex:"0","aria-label":e.$i18n.get("next"),class:"tainacan-checkbox-list-page-changer",onClick:t[16]||(t[16]=function(){return G.nextPage&&G.nextPage.apply(G,arguments)}),onKeydown:[t[17]||(t[17]=(0,n.jR)((0,n.D$)((function(){return G.nextPage&&G.nextPage.apply(G,arguments)}),["prevent"]),["enter"])),t[18]||(t[18]=(0,n.jR)((0,n.D$)((function(){return G.nextPage&&G.nextPage.apply(G,arguments)}),["prevent"]),["space"]))]},i(t[27]||(t[27]=[(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-next"})],-1)])),40,T))],4)),!Y.isSearching&&a.isTaxonomy?((0,n.uX)(),(0,n.Wv)(n.F,{key:3,ref:"tainacan-finder-scrolling-container",class:"modal-card-body tainacan-finder-columns-container",style:(0,n.Tr)({height:Y.expandResultsSection?"auto":"0px"}),name:"page-left",tag:"div"},{default:(0,n.k6)((function(){return[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(Y.finderColumns,(function(o,l){return(0,n.uX)(),(0,n.CE)("div",{key:o.label+"-"+l,class:(0,n.C4)(["tainacan-finder-column",Y.hasToDisplaySearchBar?"":"has-only-one-column"]),"aria-label":o.label?o.label:e.$i18n.get("label_root_terms"),role:"group"},[Y.hasToDisplaySearchBar?((0,n.uX)(),(0,n.CE)("p",{key:0,id:"column-label-".concat(l),class:"column-label"},(0,n.v_)(o.label?o.label:e.$i18n.get("label_root_terms")),9,M)):(0,n.Q3)("",!0),o.children.length?((0,n.uX)(),(0,n.CE)("ul",N,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.children,(function(i,o){return(0,n.uX)(),(0,n.Wv)(te,{id:"".concat(l,".").concat(o,"-tainacan-li-checkbox-model"),ref_for:!0,ref:"".concat(l,".").concat(o,"-tainacan-li-checkbox-model"),key:o,addons:!1,class:"tainacan-li-checkbox-modal"},{default:(0,n.k6)((function(){return[(0,n.Lk)("label",{class:(0,n.C4)({"b-checkbox checkbox":a.isCheckbox,"b-radio radio":!a.isCheckbox,"is-disabled":!G.isOptionSelected(i.value)&&void 0!==a.maxMultipleValues&&a.maxMultipleValues-1<a.selected.length}),onClick:function(e){return i.total_children>0&&(!Y.finderColumns[l+1]||Y.finderColumns[l+1].label!==i.label)?G.getOptionChildren(i,l,o):null}},[(0,n.Lk)("input",{disabled:!G.isOptionSelected(i.value)&&void 0!==a.maxMultipleValues&&a.maxMultipleValues-1<a.selected.length,checked:G.isOptionSelected(i.value),value:G.getOptionValue(i.value),type:a.isCheckbox?"checkbox":"radio",onInput:t[19]||(t[19]=function(e){return G.updateLocalSelection(e.target.value)})},null,40,I),t[28]||(t[28]=(0,n.Lk)("span",{class:"check"},null,-1)),(0,n.Lk)("span",P,[(0,n.bo)(((0,n.uX)(),(0,n.CE)("span",$,[(0,n.eW)((0,n.v_)(i.label),1)])),[[oe,{content:i.description,autoHide:!0,html:!0,placement:"auto-start",popperClass:["tainacan-tooltip","tooltip"]}]])])],10,A),i.total_children>0?((0,n.uX)(),(0,n.CE)("a",{key:0,tabindex:0,role:"button",onClick:function(e){return G.getOptionChildren(i,l,o)},onKeydown:[(0,n.jR)((0,n.D$)((function(e){return G.getOptionChildren(i,l,o)}),["prevent"]),["enter"]),(0,n.jR)((0,n.D$)((function(e){return G.getOptionChildren(i,l,o)}),["prevent"]),["space"])]},[Y.finderColumns.length<=1?((0,n.uX)(),(0,n.CE)("span",R,(0,n.v_)(i.total_children+" "+e.$i18n.get("label_children_terms")),1)):(0,n.bo)(((0,n.uX)(),(0,n.CE)("span",F,[(0,n.eW)((0,n.v_)(i.total_children)+" ",1),(0,n.Lk)("span",E,(0,n.v_)(e.$i18n.get("label_children_terms")),1)])),[[oe,{content:i.total_children+" "+e.$i18n.get("label_children_terms"),autoHide:!1,popperClass:["tainacan-tooltip","tooltip"]}]]),t[29]||(t[29]=(0,n.Lk)("span",{class:"icon is-pulled-right"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-1-25em tainacan-icon-arrowright"})],-1))],40,j)):(0,n.Q3)("",!0)]})),_:2},1032,["id"])})),128)),o.children.length?((0,n.uX)(),(0,n.CE)("li",V,[G.shouldShowMoreButton(l)?((0,n.uX)(),(0,n.CE)("button",{key:0,class:"tainacan-show-more",onClick:function(e){return G.getMoreOptions(o,l)}},i(t[30]||(t[30]=[(0,n.Lk)("span",{class:"icon"},[(0,n.Lk)("i",{class:"tainacan-icon tainacan-icon-1-25em tainacan-icon-showmore"})],-1)])),8,X)):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)])):(0,n.Q3)("",!0)],10,L)})),128))]})),_:1},8,["style"])):(0,n.Q3)("",!0),!(a.isTaxonomy&&(Y.finderColumns instanceof Array?Y.finderColumns.length<=0:!Y.finderColumns)||(!a.isTaxonomy&&Y.options instanceof Array?Y.options.length<=0:!Y.options))||!Y.expandResultsSection||Y.isSearching||Y.isLoadingSearch||Y.isColumnLoading?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("section",B,[(0,n.Lk)("div",D,[(0,n.Lk)("p",null,[(0,n.Lk)("span",z,[(0,n.Lk)("i",{class:(0,n.C4)(["tainacan-icon tainacan-icon-30px",{"tainacan-icon-terms":a.isTaxonomy,"tainacan-icon-metadata":!a.isTaxonomy}])},null,2)])]),(0,n.Lk)("p",null,(0,n.v_)(a.isTaxonomy?e.$i18n.get("info_no_terms_found"):e.$i18n.get("label_nothing_selected")),1)])])),(0,n.bF)(ae,{modelValue:Y.isColumnLoading,"onUpdate:modelValue":t[20]||(t[20]=function(e){return Y.isColumnLoading=e}),"is-full-page":!1},null,8,["modelValue"])],8,d)):(0,n.Q3)("",!0),1===Y.activeTab?((0,n.uX)(),(0,n.CE)("div",{key:1,id:"selected-items-content",class:"tab-item",role:G.shouldShowTabs?"tabpanel":void 0,"aria-labelledby":G.shouldShowTabs?"selected-items-label":void 0,style:{"min-height":"56px"}},[(a.selected instanceof Array?a.selected.length>0:a.selected)&&!Y.isSelectedTermsLoading?((0,n.uX)(),(0,n.CE)("div",H,[(0,n.Lk)("div",U,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(a.selected instanceof Array?a.selected:[a.selected],(function(e,t){return(0,n.uX)(),(0,n.CE)(n.FK,{key:t},[a.selected instanceof Array||""!=a.selected?((0,n.uX)(),(0,n.Wv)(ne,{key:0,attached:"",closable:"",class:"is-small",onClose:function(t){return G.updateLocalSelection(e)}},{default:(0,n.k6)((function(){return[(0,n.Lk)("span",{innerHTML:a.isTaxonomy||"Tainacan\\Metadata_Types\\Relationship"===a.metadatumType?Y.selectedTagsName[e]:e},null,8,W)]})),_:2},1032,["onClose"])):(0,n.Q3)("",!0)],64)})),128))]),(a.selected instanceof Array?a.selected.length<=0:!a.selected)&&!Y.isSelectedTermsLoading?((0,n.uX)(),(0,n.CE)("section",K,[(0,n.Lk)("div",q,[(0,n.Lk)("p",null,[(0,n.Lk)("span",J,[(0,n.Lk)("i",{class:(0,n.C4)(["tainacan-icon tainacan-icon-30px",{"tainacan-icon-terms":a.isTaxonomy,"tainacan-icon-metadata":!a.isTaxonomy}])},null,2)])]),(0,n.Lk)("p",null,(0,n.v_)(a.isTaxonomy?e.$i18n.get("label_no_terms_selected"):e.$i18n.get("label_nothing_selected")),1)])])):(0,n.Q3)("",!0),(0,n.bF)(ae,{modelValue:Y.isSelectedTermsLoading,"onUpdate:modelValue":t[21]||(t[21]=function(e){return Y.isSelectedTermsLoading=e}),"is-full-page":!1},null,8,["modelValue"])])):(0,n.Q3)("",!0)],8,Q)):(0,n.Q3)("",!0)])],2)])}},91765:(e,t,a)=>{a.d(t,{A:()=>o});var n=a(76630),i=a(99014);a(92781);const o=(0,a(66262).A)(i.A,[["render",n.X],["__scopeId","data-v-ef170ff2"]])},92781:(e,t,a)=>{a(70722)},93923:(e,t,a)=>{a.d(t,{X:()=>n.X});var n=a(87156)},94470:(e,t,a)=>{a.d(t,{X:()=>o});var n=a(6934),i={key:2,class:"add-new-term"};function o(e,t,a,o,l,r){var c=(0,n.g2)("tainacan-taxonomy-tag-input"),s=(0,n.g2)("checkbox-radio-metadata-input"),u=(0,n.g2)("term-edition-form"),d=(0,n.g2)("b-modal");return(0,n.uX)(),(0,n.CE)("div",null,["tainacan-taxonomy-tag-input"==r.getComponent?((0,n.uX)(),(0,n.Wv)(c,{key:0,value:l.valueComponent,"onUpdate:value":t[0]||(t[0]=function(e){return l.valueComponent=e}),disabled:a.disabled||l.isFetchingTerms,maxtags:null!=a.maxtags?Number(a.maxtags):"yes"==a.itemMetadatum.metadatum.multiple||!0===a.allowNew?void 0!==r.maxMultipleValues?Number(r.maxMultipleValues):null:1,"allow-new":l.allowNewFromOptions,placeholder:a.itemMetadatum.metadatum.placeholder?a.itemMetadatum.metadatum.placeholder:e.$i18n.get("instruction_type_existing_term"),"taxonomy-id":l.taxonomyId,"item-metadatum":a.itemMetadatum,"has-counter":!1,onShowAddNewTerm:r.openTermCreationModal},null,8,["value","disabled","maxtags","allow-new","placeholder","taxonomy-id","item-metadatum","onShowAddNewTerm"])):((0,n.uX)(),(0,n.Wv)(s,{key:1,id:"tainacan-item-metadatum_id-"+a.itemMetadatum.metadatum.id+(a.itemMetadatum.parent_meta_id?"_parent_meta_id-"+a.itemMetadatum.parent_meta_id:""),"is-modal":!1,parent:0,"allow-new":l.allowNewFromOptions,"taxonomy-id":l.taxonomyId,selected:l.valueComponent?l.valueComponent:[],"metadatum-id":a.itemMetadatum.metadatum.id,taxonomy:l.taxonomy,"collection-id":a.itemMetadatum.metadatum.collection_id,"is-taxonomy":!0,"max-multiple-values":r.maxMultipleValues,metadatum:a.itemMetadatum.metadatum,"amount-selected":Array.isArray(l.valueComponent)?l.valueComponent.length:l.valueComponent?"1":"0","is-checkbox":"tainacan-taxonomy-checkbox"==r.getComponent,"is-mobile-screen":a.isMobileScreen,onShowAddNewTerm:r.openTermCreationModal,onInput:t[1]||(t[1]=function(e){return l.valueComponent=e}),onMobileSpecialFocus:r.onMobileSpecialFocus},null,8,["id","allow-new","taxonomy-id","selected","metadatum-id","taxonomy","collection-id","max-multiple-values","metadatum","amount-selected","is-checkbox","is-mobile-screen","onShowAddNewTerm","onMobileSpecialFocus"])),r.displayCreateNewTerm&&!l.isTermCreationPanelOpen&&(void 0===r.maxMultipleValues||r.maxMultipleValues>l.valueComponent.length)?((0,n.uX)(),(0,n.CE)("div",i,[(0,n.Lk)("a",{class:(0,n.C4)(["add-link",{"is-loading":l.isAddingNewTermVaue}]),role:"button",tabindex:"0",onClick:t[2]||(t[2]=function(){return r.openTermCreationModal&&r.openTermCreationModal.apply(r,arguments)}),onKeydown:[t[3]||(t[3]=(0,n.jR)((0,n.D$)((function(){return r.openTermCreationModal&&r.openTermCreationModal.apply(r,arguments)}),["prevent"]),["enter"])),t[4]||(t[4]=(0,n.jR)((0,n.D$)((function(){return r.openTermCreationModal&&r.openTermCreationModal.apply(r,arguments)}),["prevent"]),["space"]))]},[t[10]||(t[10]=(0,n.Lk)("span",{class:"icon is-small"},[(0,n.Lk)("i",{class:"tainacan-icon has-text-secondary tainacan-icon-add"})],-1)),(0,n.eW)(" "+(0,n.v_)(e.$i18n.get("label_create_new_term")),1)],34)])):(0,n.Q3)("",!0),l.allowNewFromOptions&&a.itemMetadatum.item?((0,n.uX)(),(0,n.CE)(n.FK,{key:3},[(0,n.bF)(d,{"model-value":l.isTermCreationModalOpen,width:768,"trap-focus":"","aria-role":"dialog","aria-modal":"","can-cancel":["outside","escape"],"custom-class":"tainacan-modal","close-button-aria-label":e.$i18n.get("close")},{default:(0,n.k6)((function(){return[(0,n.bF)(u,{"metadatum-id":a.itemMetadatum.metadatum.id,"item-id":a.itemMetadatum.item.id,"is-hierarchical":r.isHierarchical,"taxonomy-id":l.taxonomyId,"original-form":{id:"new",name:l.newTermName?l.newTermName:""},"is-term-insertion-flow":!0,onOnEditionFinished:t[5]||(t[5]=function(e){return r.addRecentlyCreatedTerm(e.term)}),onClose:t[6]||(t[6]=function(e){return l.isTermCreationModalOpen=!1})},null,8,["metadatum-id","item-id","is-hierarchical","taxonomy-id","original-form"])]})),_:1},8,["model-value","close-button-aria-label"]),(0,n.bF)(n.eB,{name:"filter-item"},{default:(0,n.k6)((function(){return[l.isTermCreationPanelOpen?((0,n.uX)(),(0,n.Wv)((0,n.$y)("term-creation-panel"),{key:0,"metadatum-id":a.itemMetadatum.metadatum.id,"item-id":a.itemMetadatum.item.id,"is-hierarchical":r.isHierarchical,"taxonomy-id":l.taxonomyId,"original-form":{id:"new",name:l.newTermName?l.newTermName:""},onOnEditionFinished:t[7]||(t[7]=function(e){return r.addTermToBeCreated(e)}),onOnEditionCanceled:t[8]||(t[8]=function(){return l.isTermCreationPanelOpen=!1}),onOnErrorFound:t[9]||(t[9]=function(t){return e.$console.log("Form with errors: "+t)})},null,40,["metadatum-id","item-id","is-hierarchical","taxonomy-id","original-form"])):(0,n.Q3)("",!0)]})),_:1})],64)):(0,n.Q3)("",!0)])}},99014:(e,t,a)=>{a.d(t,{A:()=>n.A});var n=a(24927)}}]);