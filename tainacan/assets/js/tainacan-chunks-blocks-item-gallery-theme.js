"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[4877],{1954:(e,i,t)=>{t.r(i),t.d(i,{default:()=>u});var n=t(62214),a=t(48300),s=(t(91247),t(73889)),r=t(35189);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,n)}return t}function p(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?l(Object(t),!0).forEach((function(i){c(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}function c(e,i,t){return(i=h(i))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function d(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function h(e){var i=function(e,i){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,i||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==o(i)?i:i+""}var __=wp.i18n.__;tainacan_plugin.classes.TainacanMediaGallery=function(){return e=function e(i,t,n){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.thumbs_gallery_selector=i,this.main_gallery_selector=t,this.thumbsSwiper=null,this.mainSwiper=null,this.lightbox=null,this.options=n,this.initializeSwiper(),this.options.disable_lightbox||(this.main_gallery_selector?this.initializePhotoswipe(this.main_gallery_selector+" .swiper-wrapper"):this.thumbs_gallery_selector&&this.initializePhotoswipe(this.thumbs_gallery_selector+" .swiper-wrapper"))},i=[{key:"initializeSwiper",value:function(){if(this.thumbs_gallery_selector){var e={spaceBetween:12,slidesPerView:"auto",watchSlidesProgress:!0,navigation:{nextEl:".swiper-navigation-next_"+this.thumbs_gallery_selector,prevEl:".swiper-navigation-prev_"+this.thumbs_gallery_selector},pagination:{el:".swiper-pagination_"+this.thumbs_gallery_selector},centeredSlides:!0,centeredSlidesBounds:!0,centerInsufficientSlides:!0,slideToClickedSlide:!0,watchOverflow:!0,a11y:{prevSlideMessage:__("Previous slide","tainacan"),nextSlideMessage:__("Next slide","tainacan"),firstSlideMessage:__("This is the first slide","tainacan"),lastSlideMessage:__("This is the last slide","tainacan")},modules:[r.Vx,r.Jq,r.dK],on:{init:function(e){e.el.classList.add("swiper-is-beginning")},slideChange:function(e){e.isBeginning?e.el.classList.add("swiper-is-beginning"):e.el.classList.remove("swiper-is-beginning"),e.isEnd?e.el.classList.add("swiper-is-end"):e.el.classList.remove("swiper-is-end")}}};e=p(p({},e),this.options.swiper_thumbs_options),this.thumbsSwiper=new s.A(this.thumbs_gallery_selector,e)}if(this.main_gallery_selector){var i={slidesPerView:1,slidesPerGroup:1,watchOverflow:!0,a11y:{prevSlideMessage:__("Previous slide","tainacan"),nextSlideMessage:__("Next slide","tainacan"),firstSlideMessage:__("This is the first slide","tainacan"),lastSlideMessage:__("This is the last slide","tainacan")},pagination:{el:".swiper-pagination_"+this.main_gallery_selector,clickable:!0},modules:[r.Vx,r.Jq,r.dK]};if(i=p(p({},i),this.options.swiper_main_options),this.thumbs_gallery_selector&&this.thumbsSwiper&&(i.thumbs={swiper:this.thumbsSwiper,autoScrollOffset:3},i.modules=[r.Vx,r.Jq,r.WO,r.dK]),this.mainSwiper=new s.A(this.main_gallery_selector,i),this.thumbs_gallery_selector&&this.thumbsSwiper&&this.mainSwiper){var t=this.mainSwiper,n=this.thumbsSwiper;this.mainSwiper.on("slideChangeTransitionStart",(function(){n.slideTo(t.activeIndex)}))}}}},{key:"initializePhotoswipe",value:function(e){var i=this,t=document.querySelector(e);t.setAttribute("data-pswp-uid",this.options.media_id);var s=this,r=this.parseThumbnailElements(t),o={loop:!1,preloadFirstSlide:!1,mainClass:"tainacan-photoswipe-layer"+(this.options.lightbox_has_light_background?" has-light-color-scheme":""),bgOpacity:.85,clickToCloseNonZoomable:!1,closeTitle:__("Close lightbox","tainacan"),zoomTitle:__("Zoom","tainacan"),arrowPrevTitle:__("Previous slide","tainacan"),arrowNextTitle:__("Next slide","tainacan"),errorMsg:__("The image cannot be loaded","tainacan"),wheelToZoom:!0,getClickedIndexFn:function(e){return r.findIndex((function(i){return i.el.contains(e.target)}))},paddingFn:function(e,i,t){return{top:i.title&&i.title.name&&!s.options.hide_media_name?60:0,bottom:i.title&&(!s.options.hide_media_caption&&i.title.caption||!s.options.hide_media_description&&i.title.description)?60:0,left:40,right:40}}};this.lightbox=new n.A(p({gallery:t,children:r,pswpModule:a.A},o)),this.lightbox.init();var l=this.mainSwiper?this.mainSwiper:this.thumbsSwiper,c=this.photoswipeParseHash();c.pid&&c.gid&&this.options.media_id==c.gid&&(o.index=parseInt(c.pid,10)-1,!isNaN(o.index)&&r[o.index]&&r[o.index].el&&r[o.index].el.click()),this.lightbox.on("destroy",(function(){var e=document.getElementsByClassName("pswp__container")[0];if(e){var i=e.innerHTML;e.innerHTML="",e.innerHTML=i}})),this.lightbox.on("initialZoomInEnd",(function(){l.params&&l.params.autoplay&&l.params.autoplay.enabled&&l.autoplay.running&&l.autoplay.stop()})),this.lightbox.on("change",(function(){if(s.lightbox.pswp&&!isNaN(s.lightbox.pswp.currIndex)&&s.lightbox.pswp.currIndex>=0){l.slideTo(s.lightbox.pswp.currIndex);var e=window.location.toString();e.indexOf("#")>0?(e=e.substring(0,e.indexOf("#")),window.history.replaceState(window.history.state,"",e+"#gid="+i.options.media_id+"&pid="+(s.lightbox.pswp.currIndex+1))):window.history.pushState(window.history.state,"",e+"#gid="+i.options.media_id+"&pid="+(s.lightbox.pswp.currIndex+1))}})),this.lightbox.on("close",(function(){l.params&&l.params.autoplay&&l.params.autoplay.enabled&&l.autoplay.start();var e=window.location.toString();e.indexOf("#")>0&&window.history.replaceState({},"",e.substring(0,e.indexOf("#")))})),this.lightbox.on("uiRegister",(function(){s.lightbox.pswp.ui.registerElement({name:"name",order:7,isButton:!1,appendTo:"bar",onInit:function(e,i){s.lightbox.pswp.on("change",(function(){var t=i.currSlide.data,n="";t&&t.title&&t.title.name&&!s.options.hide_media_name&&(n+=t.title.name.innerHTML),e.innerHTML=n}))}}),s.lightbox.pswp.ui.registerElement({name:"caption",order:15,isButton:!1,appendTo:"root",onInit:function(e,i){s.lightbox.pswp.on("change",(function(){var t=i.currSlide.data,n="";t&&t.title&&(t.title.caption&&!s.options.hide_media_caption||t.title.description&&!s.options.hide_media_description)&&(n+='<div class="pswp__caption-inner">',t.title.caption&&!s.options.hide_media_caption&&(n+='<span class="pswp__figure_caption">'+t.title.caption.innerHTML+"</span>"),t.title.description&&!s.options.hide_media_description&&(n+='<span class="pswp__description">'+t.title.description.innerHTML+"</span>"),n+="</div>"),e.innerHTML=n}))}})}));var d=t.getElementsByClassName("tainacan-item-file-download");if(d&&d.length)for(var h=0;h<d.length;h++)d[h].addEventListener("click",(function(e){e.stopPropagation()}));var u=t.querySelectorAll(".swiper-slide-metadata a");if(u&&u.length)for(var m=0;m<u.length;m++)u[m].addEventListener("click",(function(e){e.stopPropagation()}))}},{key:"parseThumbnailElements",value:function(e){var i=[],t=e.childNodes;return Array.prototype.forEach.call(t,(function(e){if(1===e.nodeType){var t={},n=e.querySelectorAll(".media-full-content *");t=n.length?"IMG"===n[n.length-1].nodeName?{src:(n=n[n.length-1]).src,w:parseInt(n.width),h:parseInt(n.height)}:{html:(n=n[0]).outerHTML?n.outerHTML:n}:{html:n.outerHTML?n.outerHTML:n};var a=e.querySelector(".swiper-slide-metadata");if(a){var s=a.querySelector(".swiper-slide-metadata__name"),r=a.querySelector(".swiper-slide-metadata__caption"),o=a.querySelector(".swiper-slide-metadata__description");t.title={name:s,caption:r,description:o}}else t.title=!1;t.el=e,i.push(t)}})),i}},{key:"photoswipeParseHash",value:function(){var e=window.location.hash.substring(1),i={};if(e.length<5)return i;for(var t=e.split("&"),n=0;n<t.length;n++)if(t[n]){var a=t[n].split("=");a.length<2||(i[a[0]]=a[1])}return i.pid&&(i.pid=parseInt(i.pid,10)),i}}],i&&d(e.prototype,i),t&&d(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,t}();const u=function(e){var i,t;if(e&&e.id&&null!==(i=tainacan_plugin)&&void 0!==i&&null!==(i=i.classes)&&void 0!==i&&i.TainacanMediaGallery&&null!==(t=tainacan_plugin)&&void 0!==t&&t.tainacan_media_components&&tainacan_plugin.tainacan_media_components[e.id]){var n=tainacan_plugin.tainacan_media_components[e.id];new tainacan_plugin.classes.TainacanMediaGallery(n.has_media_thumbs?"#"+n.media_thumbs_id:null,n.has_media_main?"#"+n.media_main_id:null,n)}}}}]);