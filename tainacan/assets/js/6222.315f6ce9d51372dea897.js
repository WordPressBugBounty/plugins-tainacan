"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[6222],{590:(e,t,a)=>{var i=a(85072),o=a.n(i),n=a(97825),l=a.n(n),s=a(77659),r=a.n(s),c=a(55056),d=a.n(c),m=a(10540),u=a.n(m),_=a(63494),f=a.n(_),p=a(47591),b={};b.styleTagTransform=f(),b.setAttributes=d(),b.insert=r().bind(null,"head"),b.domAPI=l(),b.insertStyleElement=u();o()(p.A,b),p.A&&p.A.locals&&p.A.locals},25570:(e,t,a)=>{a.d(t,{X:()=>Te});var i=a(6934);function o(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}var l={key:1,class:"tainacan-form","label-width":"120px"},s={class:"columns is-multiline"},r={class:"column is-7-widescreen is-full-desktop"},c=["innerHTML"],d={class:"icon"},m={class:"options-columns"},u={class:"options-checkboxes"},_={class:"icon"},f={class:"options-columns"},p={class:"control sorting-options"},b={class:"label"},g={class:"label",style:{padding:"0 0.65em"}},h=["value"],v={class:"label"},w={class:"two-thirds-layout-options items-view-mode-options"},y={class:"field"},k={class:"label"},x={class:"control"},$=["disabled"],C=["innerHTML"],F={key:0},L=["value"],M={class:"icon"},V={class:"options-columns"},E={class:"status-radios"},P={class:"icon"},T={class:"options-checkboxes"},I={class:"icon"},H={class:"options-columns"},S={key:0,class:"item-submission-options field"},O={class:"options-checkboxes"},A={class:"icon has-text-dark"},X={key:0,class:"help"},D=["innerHTML"],z=["innerHTML"],N={class:"column is-5-widescreen is-full-desktop"},U={class:"two-thirds-layout-options"},W=["disabled"],j={class:"icon has-text-dark"},Q={class:"icon has-text-dark"},B={key:0,class:"is-small",style:{"margin-left":"2px"}},q=["innerHTML"],K={class:"label"},R={class:"header-field"},J={class:"image"},G={key:0,class:"image-placeholder"},Y=["alt","src"],Z={class:"header-buttons-row"},ee=["aria-label"],te={class:"icon"},ae=["aria-label"],ie={class:"icon"},oe={class:"thumbnail-field"},ne={key:1,class:"image"},le={class:"image-placeholder"},se=["alt","src"],re={class:"thumbnail-buttons-row"},ce=["aria-label"],de={class:"icon"},me=["aria-label"],ue={class:"icon"},_e={key:1,class:"control selected-cover-page"},fe=["innerHTML"],pe={class:"selected-cover-page-control"},be={class:"icon is-small"},ge=["href"],he={class:"icon is-small"},ve=["href"],we={class:"icon is-small"},ye=["href"],ke=["innerHTML"],xe={class:"footer field is-grouped form-submit"},$e={class:"control"},Ce={class:"help is-danger"},Fe={style:{"margin-left":"auto"},class:"control is-hidden-mobile"},Le={class:"control is-hidden-mobile"},Me={class:"control"},Ve={key:2},Ee={class:"section"},Pe={class:"content has-text-dark has-text-centered"};function Te(e,t,a,n,Te,Ie){var He=(0,i.g2)("tainacan-external-link"),Se=(0,i.g2)("tainacan-title"),Oe=(0,i.g2)("help-button"),Ae=(0,i.g2)("b-input"),Xe=(0,i.g2)("b-field"),De=(0,i.g2)("b-checkbox"),ze=(0,i.g2)("b-select"),Ne=(0,i.g2)("b-dropdown-item"),Ue=(0,i.g2)("b-dropdown"),We=(0,i.g2)("b-switch"),je=(0,i.g2)("b-radio"),Qe=(0,i.g2)("file-item"),Be=(0,i.g2)("b-autocomplete"),qe=(0,i.g2)("b-loading"),Ke=(0,i.gN)("a11y-dropdown"),Re=(0,i.gN)("tooltip");return(0,i.uX)(),(0,i.CE)("div",{class:(0,i.C4)(["page-container",{"tainacan-repository-level-colors":Te.isNewCollection}])},[Te.collection&&Te.collection.slug&&Te.collection.url?((0,i.uX)(),(0,i.Wv)(He,{key:0,"link-label":e.$i18n.get("label_view_collection_on_website"),"link-url":Te.collection.url},null,8,["link-label","link-url"])):(0,i.Q3)("",!0),(0,i.bF)(Se,{"is-sticky":!0}),null!=Te.collection&&null!=Te.collection&&(Te.isNewCollection&&e.$userCaps.hasCapability("tnc_rep_edit_collections")||!Te.isNewCollection&&Te.collection.current_user_can_edit)?((0,i.uX)(),(0,i.CE)("form",l,[(0,i.Lk)("div",s,[(0,i.Lk)("div",r,[(0,i.bF)(Xe,{addons:!1,label:e.$i18n.get("label_name"),type:null!=Te.editFormErrors.name?"is-danger":"",message:null!=Te.editFormErrors.name?Te.editFormErrors.name:""},{default:(0,i.k6)((function(){return[t[47]||(t[47]=(0,i.Lk)("span",{class:"required-metadatum-asterisk"},"*",-1)),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","name"),message:e.$i18n.getHelperMessage("collections","name")},null,8,["title","message"]),(0,i.bF)(Ae,{id:"tainacan-text-name",modelValue:Te.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return Te.form.name=e}),placeholder:e.$i18n.get("instruction_collection_name"),onBlur:Ie.updateSlug,onFocus:t[1]||(t[1]=function(e){return Ie.clearErrors("name")})},null,8,["modelValue","placeholder","onBlur"])]})),_:1},8,["label","type","message"]),e.hasBeginLeftForm?((0,i.uX)(),(0,i.CE)("form",{key:0,id:"form-collection-begin-left",class:"form-hook-region",innerHTML:e.getBeginLeftForm},null,8,c)):(0,i.Q3)("",!0),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.get("label_description"),type:null!=Te.editFormErrors.description?"is-danger":"",message:null!=Te.editFormErrors.description?Te.editFormErrors.description:""},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","description"),message:e.$i18n.getHelperMessage("collections","description")},null,8,["title","message"]),(0,i.bF)(Ae,{id:"tainacan-text-description",modelValue:Te.form.description,"onUpdate:modelValue":t[2]||(t[2]=function(e){return Te.form.description=e}),type:"textarea",rows:"4",placeholder:e.$i18n.get("instruction_collection_description"),onFocus:t[3]||(t[3]=function(e){return Ie.clearErrors("description")})},null,8,["modelValue","placeholder"])]})),_:1},8,["label","type","message"]),!Te.isLoading&&!Te.isLoadingCollectionTaxonomies&&Object.values(e.getCollectionTaxonomies)&&Object.values(e.getCollectionTaxonomies).length>0?((0,i.uX)(),(0,i.CE)("div",{key:1,class:"collection-form-section",onClick:t[4]||(t[4]=function(e){Te.showCollectionsTaxonomiesOptions=!Te.showCollectionsTaxonomiesOptions})},[(0,i.Lk)("span",d,[(0,i.Lk)("i",{class:(0,i.C4)(["tainacan-icon",Te.showCollectionsTaxonomiesOptions?"tainacan-icon-arrowdown":"tainacan-icon-arrowright"])},null,2)]),(0,i.Lk)("strong",null,(0,i.v_)(e.$i18n.get("label_collections_taxonomies")),1),t[48]||(t[48]=(0,i.Lk)("hr",null,null,-1))])):(0,i.Q3)("",!0),(0,i.bF)(i.eB,{name:"filter-item"},{default:(0,i.k6)((function(){return[(0,i.bo)((0,i.Lk)("div",m,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.getCollectionTaxonomies,(function(e,t){return(0,i.uX)(),(0,i.CE)(i.FK,null,[e.terms&&Te.form.collection_taxonomies&&Te.form.collection_taxonomies[t]?((0,i.uX)(),(0,i.Wv)(Xe,{key:t,addons:!1,label:e.name},{default:(0,i.k6)((function(){return[(0,i.Lk)("div",u,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.terms,(function(a,o){return(0,i.uX)(),(0,i.Wv)(De,{key:o,"model-value":!(!Te.form.collection_taxonomies[t].terms||!Te.form.collection_taxonomies[t].terms[a.slug]),"onUpdate:modelValue":function(i){return Ie.updateCollectionTaxonomyTerm(e.rest_base,t,a,i)}},{default:(0,i.k6)((function(){return[(0,i.eW)((0,i.v_)(a.name),1)]})),_:2},1032,["model-value","onUpdate:modelValue"])})),128))])]})),_:2},1032,["label"])):(0,i.Q3)("",!0)],64)})),256))],512),[[i.aG,Te.showCollectionsTaxonomiesOptions]])]})),_:1}),(0,i.Lk)("div",{class:"collection-form-section",onClick:t[5]||(t[5]=function(e){Te.showItemsListOptions=!Te.showItemsListOptions})},[(0,i.Lk)("span",_,[(0,i.Lk)("i",{class:(0,i.C4)(["tainacan-icon",Te.showItemsListOptions?"tainacan-icon-arrowdown":"tainacan-icon-arrowright"])},null,2)]),(0,i.Lk)("strong",null,(0,i.v_)(e.$i18n.get("label_items_list_options")),1),t[49]||(t[49]=(0,i.Lk)("hr",null,null,-1))]),(0,i.bF)(i.eB,{name:"filter-item"},{default:(0,i.k6)((function(){return[(0,i.bo)((0,i.Lk)("div",f,[(0,i.bF)(Xe,{addons:!1,label:e.$i18n.get("label_default_orderby"),type:null!=Te.editFormErrors.default_orderby?"is-danger":"",message:null!=Te.editFormErrors.default_orderby?Te.editFormErrors.default_orderby:e.$i18n.get("info_default_orderby")},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","default_orderby"),message:e.$i18n.getHelperMessage("collections","default_orderby")},null,8,["title","message"]),(0,i.Lk)("div",p,[(0,i.Lk)("label",b,(0,i.v_)(e.$i18n.get("label_sort"))+" ",1),(0,i.bF)(ze,{id:"tainacan-select-default_order",modelValue:Te.form.default_order,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Te.form.default_order=e})},{default:(0,i.k6)((function(){return[(0,i.Lk)("option",{role:"button",class:(0,i.C4)({"is-active":"DESC"==Te.form.default_order}),value:"DESC"},(0,i.v_)(e.$i18n.get("label_descending")),3),(0,i.Lk)("option",{role:"button",tabindex:"0",class:(0,i.C4)({"is-active":"ASC"==Te.form.default_order}),value:"ASC"},(0,i.v_)(e.$i18n.get("label_ascending")),3)]})),_:1},8,["modelValue"]),(0,i.Lk)("span",g,(0,i.v_)(e.$i18n.get("info_by_inner")),1),(0,i.bF)(ze,{id:"tainacan-select-default_orderby",modelValue:Te.localDefaultOrderBy,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Te.localDefaultOrderBy=e}),expanded:"",loading:Te.isLoadingMetadata},{default:(0,i.k6)((function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Te.sortingMetadata,(function(e){return(0,i.uX)(),(0,i.CE)("option",{key:e.id,value:e.id},(0,i.v_)(e.name),9,h)})),128))]})),_:1},8,["modelValue","loading"])])]})),_:1},8,["label","type","message"]),(0,i.Lk)("label",v,(0,i.v_)(e.$i18n.get("label_view_modes_public_list")),1),(0,i.Lk)("div",w,[(0,i.Lk)("div",y,[(0,i.Lk)("label",k,(0,i.v_)(e.$i18n.get("label_view_modes_available")),1),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","enabled_view_modes"),message:e.$i18n.getHelperMessage("collections","enabled_view_modes")},null,8,["title","message"]),(0,i.Lk)("div",x,[(0,i.bo)(((0,i.uX)(),(0,i.Wv)(Ue,{ref:"enabledViewModesDropdown","trigger-tabindex":-1,"mobile-modal":!0,disabled:Object.keys(Ie.registeredAndNotDisabledViewModes).length<0,class:"enabled-view-modes-dropdown","trap-focus":"",position:"is-top-right"},{trigger:(0,i.k6)((function(){return[(0,i.Lk)("button",{class:"button is-white",position:"is-top-right",type:"button",disabled:Object.keys(Ie.registeredAndNotDisabledViewModes).length<0},[(0,i.Lk)("span",null,(0,i.v_)(e.$i18n.get("label_enabled_view_modes")),1),t[50]||(t[50]=(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-1-25em tainacan-icon-arrowdown"})],-1))],8,$)]})),default:(0,i.k6)((function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Object.keys(Ie.registeredAndNotDisabledViewModes),(function(e,t){return(0,i.uX)(),(0,i.Wv)(Ne,{key:t,custom:""},{default:(0,i.k6)((function(){return[null!=Ie.registeredAndNotDisabledViewModes[e]?((0,i.uX)(),(0,i.Wv)(De,{key:0,"model-value":Ie.checkIfViewModeEnabled(e),disabled:Ie.checkIfViewModeEnabled(e)&&Te.form.enabled_view_modes.filter((function(e){return Ie.registeredAndNotDisabledViewModes[e]&&1!=Ie.registeredAndNotDisabledViewModes[e].full_screen})).length<=1,"onUpdate:modelValue":function(t){return Ie.updateViewModeslist(e)}},{default:(0,i.k6)((function(){return[(0,i.Lk)("p",null,[(0,i.Lk)("strong",null,[(0,i.Lk)("span",{class:(0,i.C4)(["gray-icon",{"has-text-secondary":Ie.checkIfViewModeEnabled(e),"has-text-dark":!Ie.checkIfViewModeEnabled(e)}]),innerHTML:Ie.registeredAndNotDisabledViewModes[e].icon},null,10,C),(0,i.eW)("  "+(0,i.v_)(Ie.registeredAndNotDisabledViewModes[e].label),1)])]),Ie.registeredAndNotDisabledViewModes[e].description?((0,i.uX)(),(0,i.CE)("p",F,(0,i.v_)(Ie.registeredAndNotDisabledViewModes[e].description),1)):(0,i.Q3)("",!0)]})),_:2},1032,["model-value","disabled","onUpdate:modelValue"])):(0,i.Q3)("",!0)]})),_:2},1024)})),128))]})),_:1},8,["disabled"])),[[Ke]])])]),Te.form.enabled_view_modes.length>0?((0,i.uX)(),(0,i.Wv)(Xe,{key:0,addons:!1,label:e.$i18n.get("label_default"),type:null!=Te.editFormErrors.default_view_mode?"is-danger":"",message:null!=Te.editFormErrors.default_view_mode?Te.editFormErrors.default_view_mode:""},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","default_view_mode"),message:e.$i18n.getHelperMessage("collections","default_view_mode")},null,8,["title","message"]),(0,i.bF)(ze,{id:"tainacan-select-default_view_mode",modelValue:Te.form.default_view_mode,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Te.form.default_view_mode=e}),expanded:"",onFocus:t[9]||(t[9]=function(e){return Ie.clearErrors("default_view_mode")})},{default:(0,i.k6)((function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Ie.validDefaultViewModes,(function(e,t){return(0,i.uX)(),(0,i.CE)("option",{key:t,value:e},(0,i.v_)(Ie.registeredAndNotDisabledViewModes[e].label),9,L)})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["label","type","message"])):(0,i.Q3)("",!0)]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","hide_items_thumbnail_on_lists")},{default:(0,i.k6)((function(){return[t[51]||(t[51]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-hide-items-thumbnail-on-lists",modelValue:Te.form.hide_items_thumbnail_on_lists,"onUpdate:modelValue":t[10]||(t[10]=function(e){return Te.form.hide_items_thumbnail_on_lists=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","hide_items_thumbnail_on_lists"),message:e.$i18n.getHelperMessage("collections","hide_items_thumbnail_on_lists")},null,8,["title","message"])]})),_:1},8,["label"])],512),[[i.aG,Te.showItemsListOptions]])]})),_:1}),(0,i.Lk)("div",{class:"collection-form-section",onClick:t[11]||(t[11]=function(e){Te.showItemEditionFormOptions=!Te.showItemEditionFormOptions})},[(0,i.Lk)("span",M,[(0,i.Lk)("i",{class:(0,i.C4)(["tainacan-icon",Te.showItemEditionFormOptions?"tainacan-icon-arrowdown":"tainacan-icon-arrowright"])},null,2)]),(0,i.Lk)("strong",null,(0,i.v_)(e.$i18n.get("label_item_edition_form_options")),1),t[52]||(t[52]=(0,i.Lk)("hr",null,null,-1))]),(0,i.bF)(i.eB,{name:"filter-item"},{default:(0,i.k6)((function(){return[(0,i.bo)((0,i.Lk)("div",V,[(0,i.Lk)("div",null,[(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","item_enabled_document_types")},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","item_enabled_document_types"),message:e.$i18n.getHelperMessage("collections","item_enabled_document_types")},null,8,["title","message"]),(0,i.Lk)("div",E,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(Te.form.item_enabled_document_types,(function(e,t){return(0,i.uX)(),(0,i.Wv)(De,{key:t,modelValue:e.enabled,"onUpdate:modelValue":function(t){return e.enabled=t},"true-value":"yes","false-value":"no"},{default:(0,i.k6)((function(){return[(0,i.Lk)("span",P,[(0,i.Lk)("i",{class:(0,i.C4)("tainacan-icon tainacan-icon-"+e.icon)},null,2)]),(0,i.eW)(" "+(0,i.v_)(e.label),1)]})),_:2},1032,["modelValue","onUpdate:modelValue"])})),128))])]})),_:1},8,["label"]),Object.values(Te.form.item_enabled_document_types).some((function(e){return"yes"===e.enabled}))?((0,i.uX)(),(0,i.Wv)(Xe,{key:0,addons:!1,label:e.$i18n.getHelperTitle("collections","item_document_label")},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","item_document_label"),message:e.$i18n.getHelperMessage("collections","item_document_label")},null,8,["title","message"]),(0,i.bF)(Ae,{id:"tainacan-text-item-document-label",modelValue:Te.form.item_document_label,"onUpdate:modelValue":t[12]||(t[12]=function(e){return Te.form.item_document_label=e})},null,8,["modelValue"])]})),_:1},8,["label"])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[(0,i.bF)(Xe,{style:{"margin-top":"1.5rem","margin-bottom":"0rem"},addons:!1,label:e.$i18n.getHelperTitle("collections","item_enable_thumbnail")},{default:(0,i.k6)((function(){return[t[53]||(t[53]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-item-enable-thumbnail",modelValue:Te.form.item_enable_thumbnail,"onUpdate:modelValue":t[13]||(t[13]=function(e){return Te.form.item_enable_thumbnail=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","item_enable_thumbnail"),message:e.$i18n.getHelperMessage("collections","item_enable_thumbnail")},null,8,["title","message"])]})),_:1},8,["label"]),"yes"===Te.form.item_enable_thumbnail?((0,i.uX)(),(0,i.Wv)(Xe,{key:0,addons:!1,label:e.$i18n.getHelperTitle("collections","item_thumbnail_label")},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","item_thumbnail_label"),message:e.$i18n.getHelperMessage("collections","item_thumbnail_label")},null,8,["title","message"]),(0,i.bF)(Ae,{id:"tainacan-text-item-thumbnail-label",modelValue:Te.form.item_thumbnail_label,"onUpdate:modelValue":t[14]||(t[14]=function(e){return Te.form.item_thumbnail_label=e})},null,8,["modelValue"])]})),_:1},8,["label"])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",null,[(0,i.bF)(Xe,{style:{"margin-top":"1.5rem","margin-bottom":"0rem"},addons:!1,label:e.$i18n.getHelperTitle("collections","item_enable_attachments")},{default:(0,i.k6)((function(){return[t[54]||(t[54]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-item-enable-attachments",modelValue:Te.form.item_enable_attachments,"onUpdate:modelValue":t[15]||(t[15]=function(e){return Te.form.item_enable_attachments=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","item_enable_attachments"),message:e.$i18n.getHelperMessage("collections","item_enable_attachments")},null,8,["title","message"])]})),_:1},8,["label"]),"yes"===Te.form.item_enable_attachments?((0,i.uX)(),(0,i.Wv)(Xe,{key:0,addons:!1,label:e.$i18n.getHelperTitle("collections","item_attachment_label")},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","item_attachment_label"),message:e.$i18n.getHelperMessage("collections","item_attachment_label")},null,8,["title","message"]),(0,i.bF)(Ae,{id:"tainacan-text-item-attachment-label-singular",modelValue:Te.form.item_attachment_label,"onUpdate:modelValue":t[16]||(t[16]=function(e){return Te.form.item_attachment_label=e})},null,8,["modelValue"])]})),_:1},8,["label"])):(0,i.Q3)("",!0)]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.get("label_metadata_related_features")},{default:(0,i.k6)((function(){return[(0,i.Lk)("div",T,[(0,i.bF)(De,{modelValue:Te.form.item_enable_metadata_collapses,"onUpdate:modelValue":t[17]||(t[17]=function(e){return Te.form.item_enable_metadata_collapses=e}),"true-value":"yes","false-value":"no"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,i.v_)(e.$i18n.getHelperTitle("collections","item_enable_metadata_collapses")),1)]})),_:1},8,["modelValue"]),(0,i.bF)(De,{modelValue:Te.form.item_enable_metadata_focus_mode,"onUpdate:modelValue":t[18]||(t[18]=function(e){return Te.form.item_enable_metadata_focus_mode=e}),"true-value":"yes","false-value":"no"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,i.v_)(e.$i18n.getHelperTitle("collections","item_enable_metadata_focus_mode")),1)]})),_:1},8,["modelValue"]),(0,i.bF)(De,{modelValue:Te.form.item_enable_metadata_required_filter,"onUpdate:modelValue":t[19]||(t[19]=function(e){return Te.form.item_enable_metadata_required_filter=e}),"true-value":"yes","false-value":"no"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,i.v_)(e.$i18n.getHelperTitle("collections","item_enable_metadata_required_filter")),1)]})),_:1},8,["modelValue"]),(0,i.bF)(De,{modelValue:Te.form.item_enable_metadata_searchbar,"onUpdate:modelValue":t[20]||(t[20]=function(e){return Te.form.item_enable_metadata_searchbar=e}),"true-value":"yes","false-value":"no"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,i.v_)(e.$i18n.getHelperTitle("collections","item_enable_metadata_searchbar")),1)]})),_:1},8,["modelValue"]),(0,i.bF)(De,{modelValue:Te.form.item_enable_metadata_enumeration,"onUpdate:modelValue":t[21]||(t[21]=function(e){return Te.form.item_enable_metadata_enumeration=e}),"true-value":"yes","false-value":"no"},{default:(0,i.k6)((function(){return[(0,i.eW)((0,i.v_)(e.$i18n.getHelperTitle("collections","item_enable_metadata_enumeration")),1)]})),_:1},8,["modelValue"])])]})),_:1},8,["label"]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","item_publication_label")},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","item_publication_label"),message:e.$i18n.getHelperMessage("collections","item_publication_label")},null,8,["title","message"]),(0,i.bF)(Ae,{id:"tainacan-text-item-publication-label",modelValue:Te.form.item_publication_label,"onUpdate:modelValue":t[22]||(t[22]=function(e){return Te.form.item_publication_label=e})},null,8,["modelValue"])]})),_:1},8,["label"]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","allow_item_slug_editing")},{default:(0,i.k6)((function(){return[t[55]||(t[55]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-item-slug-editing",modelValue:Te.form.allow_item_slug_editing,"onUpdate:modelValue":t[23]||(t[23]=function(e){return Te.form.allow_item_slug_editing=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","allow_item_slug_editing"),message:e.$i18n.getHelperMessage("collections","allow_item_slug_editing")},null,8,["title","message"])]})),_:1},8,["label"]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","allow_item_author_editing")},{default:(0,i.k6)((function(){return[t[56]||(t[56]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-item-author-editing",modelValue:Te.form.allow_item_author_editing,"onUpdate:modelValue":t[24]||(t[24]=function(e){return Te.form.allow_item_author_editing=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","allow_item_author_editing"),message:e.$i18n.getHelperMessage("collections","allow_item_author_editing")},null,8,["title","message"])]})),_:1},8,["label"]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","allow_comments")},{default:(0,i.k6)((function(){return[t[57]||(t[57]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-comment-status",modelValue:Te.form.allow_comments,"onUpdate:modelValue":t[25]||(t[25]=function(e){return Te.form.allow_comments=e}),size:"is-small","true-value":"open","false-value":"closed"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","allow_comments"),message:e.$i18n.getHelperMessage("collections","allow_comments")},null,8,["title","message"])]})),_:1},8,["label"])],512),[[i.aG,Te.showItemEditionFormOptions]])]})),_:1}),(0,i.Lk)("div",{class:"collection-form-section",onClick:t[26]||(t[26]=function(e){Te.showItemSubmissionOptions=!Te.showItemSubmissionOptions})},[(0,i.Lk)("span",I,[(0,i.Lk)("i",{class:(0,i.C4)(["tainacan-icon",Te.showItemSubmissionOptions?"tainacan-icon-arrowdown":"tainacan-icon-arrowright"])},null,2)]),(0,i.Lk)("strong",null,(0,i.v_)(e.$i18n.get("label_item_submission_options")),1),t[58]||(t[58]=(0,i.Lk)("hr",null,null,-1))]),(0,i.bF)(i.eB,{name:"filter-item"},{default:(0,i.k6)((function(){return[(0,i.bo)((0,i.Lk)("div",H,[(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","allows_submission"),type:null!=Te.editFormErrors.allows_submission?"is-danger":"",message:null!=Te.editFormErrors.allows_submission?Te.editFormErrors.allows_submission:""},{default:(0,i.k6)((function(){return[t[59]||(t[59]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-allow-submission",modelValue:Te.form.allows_submission,"onUpdate:modelValue":t[27]||(t[27]=function(e){return Te.form.allows_submission=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","allows_submission"),message:e.$i18n.getHelperMessage("collections","allows_submission")},null,8,["title","message"])]})),_:1},8,["label","type","message"]),(0,i.bF)(i.eB,{name:"filter-item"},{default:(0,i.k6)((function(){return["yes"===Te.form.allows_submission?((0,i.uX)(),(0,i.CE)("div",S,[(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","submission_anonymous_user"),type:null!=Te.editFormErrors.submission_anonymous_user?"is-danger":"",message:null!=Te.editFormErrors.submission_anonymous_user?Te.editFormErrors.submission_anonymous_user:""},{default:(0,i.k6)((function(){return[t[60]||(t[60]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-allow-submission",modelValue:Te.form.submission_anonymous_user,"onUpdate:modelValue":t[28]||(t[28]=function(e){return Te.form.submission_anonymous_user=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","submission_anonymous_user"),message:e.$i18n.getHelperMessage("collections","submission_anonymous_user")},null,8,["title","message"])]})),_:1},8,["label","type","message"]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","submission_default_status"),type:null!=Te.editFormErrors.submission_default_status?"is-danger":"",message:null!=Te.editFormErrors.submission_default_status?Te.editFormErrors.submission_default_status:""},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","submission_default_status"),message:e.$i18n.getHelperMessage("collections","submission_default_status")},null,8,["title","message"]),(0,i.Lk)("div",O,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$statusHelper.getStatuses().filter((function(e){return"trash"!=e.slug})),(function(a,o){return(0,i.uX)(),(0,i.Wv)(je,{key:o,modelValue:Te.form.submission_default_status,"onUpdate:modelValue":t[29]||(t[29]=function(e){return Te.form.submission_default_status=e}),"native-value":a.slug},{default:(0,i.k6)((function(){return[(0,i.Lk)("span",A,[(0,i.Lk)("i",{class:(0,i.C4)(["tainacan-icon tainacan-icon-18px",e.$statusHelper.getIcon(a.slug)])},null,2)]),(0,i.eW)(" "+(0,i.v_)(a.name),1)]})),_:2},1032,["modelValue","native-value"])})),128))]),(0,i.bF)(i.eB,{name:"filter-item"},{default:(0,i.k6)((function(){return["draft"==Te.form.submission_default_status?((0,i.uX)(),(0,i.CE)("p",X,(0,i.v_)(e.$i18n.get("info_item_submission_draft_status")),1)):(0,i.Q3)("",!0)]})),_:1})]})),_:1},8,["label","type","message"]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.getHelperTitle("collections","submission_use_recaptcha"),type:null!=Te.editFormErrors.submission_use_recaptcha?"is-danger":"",message:null!=Te.editFormErrors.submission_use_recaptcha?Te.editFormErrors.submission_use_recaptcha:""},{default:(0,i.k6)((function(){return[t[61]||(t[61]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-submission-use-recaptcha",modelValue:Te.form.submission_use_recaptcha,"onUpdate:modelValue":t[30]||(t[30]=function(e){return Te.form.submission_use_recaptcha=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","submission_use_recaptcha"),message:e.$i18n.getHelperMessage("collections","submission_use_recaptcha")},null,8,["title","message"]),"yes"==Te.form.submission_use_recaptcha?((0,i.uX)(),(0,i.CE)("p",{key:0,innerHTML:e.$i18n.getWithVariables("info_recaptcha_link_%s",[Te.reCAPTCHASettingsPagePath])},null,8,D)):(0,i.Q3)("",!0)]})),_:1},8,["label","type","message"])])):(0,i.Q3)("",!0)]})),_:1})],512),[[i.aG,Te.showItemSubmissionOptions]])]})),_:1}),e.hasEndLeftForm?((0,i.uX)(),(0,i.CE)("form",{key:2,id:"form-collection-end-left",ref:"form-collection-end-left",class:"form-hook-region",innerHTML:e.getEndLeftForm},null,8,z)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",N,[(0,i.Lk)("div",U,[(0,i.bF)(Xe,{addons:!1,label:e.$i18n.get("label_slug"),type:null!=Te.editFormErrors.slug?"is-danger":"",message:Te.isUpdatingSlug?e.$i18n.get("info_validating_slug"):null!=Te.editFormErrors.slug?Te.editFormErrors.slug:""},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","slug"),message:e.$i18n.getHelperMessage("collections","slug")},null,8,["title","message"]),(0,i.bF)(Ae,{id:"tainacan-text-slug",modelValue:Te.form.slug,"onUpdate:modelValue":[t[31]||(t[31]=function(e){return Te.form.slug=e}),Ie.updateSlug],disabled:Te.isUpdatingSlug,loading:Te.isUpdatingSlug,onFocus:t[32]||(t[32]=function(e){return Ie.clearErrors("slug")})},null,8,["modelValue","disabled","loading","onUpdate:modelValue"])]})),_:1},8,["label","type","message"]),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.get("label_status"),type:null!=Te.editFormErrors.status?"is-danger":"",message:null!=Te.editFormErrors.status?Te.editFormErrors.status:""},{default:(0,i.k6)((function(){return[(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","status"),message:e.$i18n.getHelperMessage("collections","status")},null,8,["title","message"]),(0,i.bo)(((0,i.uX)(),(0,i.Wv)(Ue,{ref:"collection-edition-status-dropdown","trigger-tabindex":-1,class:"collection-edition-status-dropdown",position:"is-bottom-left",triggers:["click"],disabled:Te.editFormErrors.status&&("publish"==Te.form.status||"private"==Te.form.status||"pending"==Te.form.status),"max-height":"300px"},{trigger:(0,i.k6)((function(){return[(0,i.Lk)("button",{disabled:Te.editFormErrors.status&&("publish"==Te.form.status||"private"==Te.form.status||"pending"==Te.form.status),type:"button",class:(0,i.C4)(["button is-outlined",{disabled:Te.editFormErrors.status&&("publish"==Te.form.status||"private"==Te.form.status||"pending"==Te.form.status)}]),style:{width:"auto"}},[(0,i.Lk)("span",j,[(0,i.Lk)("i",{class:(0,i.C4)(["tainacan-icon tainacan-icon-18px",e.$statusHelper.getIcon(Te.form.status)])},null,2)]),"auto-draft"!==Te.form.status&&e.$statusHelper.getStatuses().find((function(e){return e.slug==Te.form.status}))?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[(0,i.eW)((0,i.v_)(e.$statusHelper.getStatuses().find((function(e){return e.slug==Te.form.status})).name),1)],64)):"auto-draft"===Te.form.status?((0,i.uX)(),(0,i.CE)(i.FK,{key:1},[(0,i.eW)((0,i.v_)(e.$i18n.get("status_auto-draft")),1)],64)):(0,i.Q3)("",!0),t[62]||(t[62]=(0,i.Lk)("span",{style:{"margin-left":"0.5em"},class:"icon is-small"},[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-1-25em tainacan-icon-arrowdown"})],-1))],10,W)]})),default:(0,i.k6)((function(){return[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.$statusHelper.getStatuses().filter((function(e){return"draft"!=e.slug&&("auto-draft"!=Te.collection.status||"trash"!=e.slug)})),(function(a,o){return(0,i.uX)(),(0,i.Wv)(Ne,{key:o,onClick:function(e){return Te.form.status=a.slug},onKeydown:[(0,i.jR)((0,i.D$)((function(e){return Te.form.status=a.slug}),["prevent"]),["enter"]),(0,i.jR)((0,i.D$)((function(e){return Te.form.status=a.slug}),["prevent"]),["space"])]},{default:(0,i.k6)((function(){return[(0,i.Lk)("span",Q,[(0,i.Lk)("i",{class:(0,i.C4)(["tainacan-icon tainacan-icon-18px",e.$statusHelper.getIcon(a.slug)])},null,2)]),(0,i.eW)(" "+(0,i.v_)(a.name)+" ",1),t[63]||(t[63]=(0,i.Lk)("br",null,null,-1)),e.$statusHelper.hasDescription(a.slug)?((0,i.uX)(),(0,i.CE)("small",B,(0,i.v_)(e.$statusHelper.getDescription(a.slug)),1)):(0,i.Q3)("",!0)]})),_:2},1032,["onClick","onKeydown"])})),128))]})),_:1},8,["disabled"])),[[Ke]])]})),_:1},8,["label","type","message"])]),e.hasBeginRightForm?((0,i.uX)(),(0,i.CE)("form",{key:0,id:"form-collection-begin-right",class:"form-hook-region",innerHTML:e.getBeginRightForm},null,8,q)):(0,i.Q3)("",!0),(0,i.bF)(Xe,{id:"header-and-thumbnail-container",addons:!1},{default:(0,i.k6)((function(){return[(0,i.Lk)("label",K,[(0,i.eW)((0,i.v_)(e.$i18n.get("label_thumbnail"))+" & "+(0,i.v_)(e.$i18n.get("label_header_image"))+" ",1),(0,i.bF)(Oe,{title:e.$i18n.get("label_thumbnail")+" & "+e.$i18n.get("label_header_image"),message:e.$i18n.get("info_collection_thumbnail_and_header")},null,8,["title","message"])]),(0,i.Lk)("div",R,[(0,i.Lk)("figure",J,[null==Te.collection.header_image||0==Te.collection.header_image?((0,i.uX)(),(0,i.CE)("span",G,(0,i.v_)(e.$i18n.get("label_empty_header_image")),1)):(0,i.Q3)("",!0),(0,i.Lk)("img",{alt:e.$i18n.get("label_thumbnail"),src:null==Te.collection.header_image||0==Te.collection.header_image?Te.headerPlaceholderPath:Te.collection.header_image},null,8,Y)]),(0,i.Lk)("div",Z,[(0,i.Lk)("a",{id:"button-edit-header-image",class:"button is-rounded is-secondary","aria-label":e.$i18n.get("label_button_edit_header_image"),onClick:t[33]||(t[33]=function(e){return Te.headerImageMediaFrame.openFrame(e)})},[(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",te,o(t[64]||(t[64]=[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-edit"},null,-1)])))),[[Re,{content:e.$i18n.get("edit"),autoHide:!0,placement:"bottom",popperClass:["tainacan-tooltip","tooltip"]}]])],8,ee),(0,i.Lk)("a",{id:"button-delete-header-image",class:"button is-rounded is-secondary","aria-label":e.$i18n.get("label_button_delete_thumb"),onClick:t[34]||(t[34]=function(e){return Ie.deleteHeaderImage()})},[(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",ie,o(t[65]||(t[65]=[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-delete"},null,-1)])))),[[Re,{content:e.$i18n.get("delete"),autoHide:!0,placement:"bottom",popperClass:["tainacan-tooltip","tooltip"]}]])],8,ae)])]),(0,i.Lk)("div",oe,[null!=Te.collection.thumbnail&&(null!=Te.collection.thumbnail["tainacan-medium"]&&0!=Te.collection.thumbnail["tainacan-medium"]||null!=Te.collection.thumbnail.medium&&0!=Te.collection.thumbnail.medium)?((0,i.uX)(),(0,i.Wv)(Qe,{key:0,"show-name":!1,"modal-on-click":!0,size:146,file:{media_type:"image",thumbnails:{"tainacan-medium":[e.$thumbHelper.getSrc(Te.collection.thumbnail,"tainacan-medium")]},title:e.$i18n.get("label_thumbnail"),description:"<img alt='"+e.$i18n.get("label_thumbnail")+"' src='"+e.$thumbHelper.getSrc(Te.collection.thumbnail,"full")+"'/>"}},null,8,["file"])):(0,i.Q3)("",!0),null!=Te.collection.thumbnail&&(null!=Te.collection.thumbnail.medium&&0!=Te.collection.thumbnail.medium||null!=Te.collection.thumbnail["tainacan-medium"]&&0!=Te.collection.thumbnail["tainacan-medium"])?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("figure",ne,[(0,i.Lk)("span",le,(0,i.v_)(e.$i18n.get("label_empty_thumbnail")),1),(0,i.Lk)("img",{alt:e.$i18n.get("label_thumbnail"),src:e.$thumbHelper.getEmptyThumbnailPlaceholder()},null,8,se)])),(0,i.Lk)("div",re,[(0,i.Lk)("a",{id:"button-edit-thumbnail",class:"button is-rounded is-secondary","aria-label":e.$i18n.get("label_button_edit_thumb"),onClick:t[35]||(t[35]=(0,i.D$)((function(e){return Te.thumbnailMediaFrame.openFrame(e)}),["prevent"]))},[(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",de,o(t[66]||(t[66]=[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-edit"},null,-1)])))),[[Re,{content:e.$i18n.get("edit"),autoHide:!0,placement:"bottom",popperClass:["tainacan-tooltip","tooltip"]}]])],8,ce),(0,i.Lk)("a",{id:"button-delete-header-image",class:"button is-rounded is-secondary","aria-label":e.$i18n.get("label_button_delete_thumb"),onClick:t[36]||(t[36]=function(e){return Ie.deleteThumbnail()})},[(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",ue,o(t[67]||(t[67]=[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-delete"},null,-1)])))),[[Re,{content:e.$i18n.get("delete"),autoHide:!0,placement:"bottom",popperClass:["tainacan-tooltip","tooltip"]}]])],8,me)])])]})),_:1}),(0,i.bF)(Xe,{addons:!1,label:e.$i18n.get("label_cover_page"),type:null!=Te.editFormErrors.cover_page_id?"is-danger":"",message:null!=Te.editFormErrors.cover_page_id?Te.editFormErrors.cover_page_id:""},{default:(0,i.k6)((function(){return[t[74]||(t[74]=(0,i.eW)("   ",-1)),(0,i.bF)(We,{id:"tainacan-checkbox-cover-page",modelValue:Te.form.enable_cover_page,"onUpdate:modelValue":t[37]||(t[37]=function(e){return Te.form.enable_cover_page=e}),size:"is-small","true-value":"yes","false-value":"no"},null,8,["modelValue"]),(0,i.bF)(Oe,{title:e.$i18n.getHelperTitle("collections","cover_page_id"),message:e.$i18n.getHelperMessage("collections","cover_page_id")},null,8,["title","message"]),"yes"==Te.form.enable_cover_page?((0,i.uX)(),(0,i.CE)(i.FK,{key:0},[null==Te.coverPage||null==Te.coverPage.title?((0,i.uX)(),(0,i.Wv)(Be,{key:0,id:"tainacan-text-cover-page",modelValue:Te.coverPageTitle,"onUpdate:modelValue":[t[38]||(t[38]=function(e){return Te.coverPageTitle=e}),Ie.fecthCoverPages],placeholder:e.$i18n.get("instruction_cover_page"),data:Te.coverPages,loading:Te.isFetchingPages,"check-infinite-scroll":"",onSelect:t[39]||(t[39]=function(e){return Ie.onSelectCoverPage(e)}),onFocus:t[40]||(t[40]=function(e){return Ie.clearErrors("cover_page_id")}),onInfiniteScroll:Ie.fetchMoreCoverPages},{default:(0,i.k6)((function(e){return[(0,i.eW)((0,i.v_)(e.option.title.rendered),1)]})),empty:(0,i.k6)((function(){return[(0,i.eW)((0,i.v_)(e.$i18n.get("info_no_page_found")),1)]})),_:1},8,["modelValue","placeholder","data","loading","onUpdate:modelValue","onInfiniteScroll"])):(0,i.Q3)("",!0),null!=Te.coverPage&&null!=Te.coverPage.title?((0,i.uX)(),(0,i.CE)("div",_e,[(0,i.Lk)("span",{innerHTML:Te.coverPage.title.rendered},null,8,fe),(0,i.Lk)("span",pe,[(0,i.Lk)("a",{target:"_blank",onClick:t[41]||(t[41]=(0,i.D$)((function(e){return Ie.removeCoverPage()}),["prevent"]))},[(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",be,o(t[68]||(t[68]=[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-close"},null,-1)])))),[[Re,{content:e.$i18n.get("remove_value"),autoHide:!0,placement:"bottom",popperClass:["tainacan-tooltip","tooltip"]}]])])])])):(0,i.Q3)("",!0),(0,i.Lk)("span",{class:(0,i.C4)([{disabled:"yes"!=Te.form.enable_cover_page||null==Te.coverPage||null==Te.coverPage.title},"selected-cover-page-buttons"])},[(0,i.Lk)("a",{target:"_blank",href:Te.coverPage.link},[(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",he,o(t[69]||(t[69]=[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-1-25em tainacan-icon-openurl"},null,-1)])))),[[Re,{content:e.$i18n.get("see"),autoHide:!0,placement:"bottom",popperClass:["tainacan-tooltip","tooltip"]}]])],8,ge),t[71]||(t[71]=(0,i.eW)("    ",-1)),(0,i.Lk)("a",{target:"blank",href:Te.coverPageEditPath},[(0,i.bo)(((0,i.uX)(),(0,i.CE)("span",we,o(t[70]||(t[70]=[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-edit"},null,-1)])))),[[Re,{content:e.$i18n.get("edit"),autoHide:!0,placement:"bottom",popperClass:["tainacan-tooltip","tooltip"]}]])],8,ve)],2),t[73]||(t[73]=(0,i.Lk)("br",null,null,-1)),(0,i.Lk)("a",{class:(0,i.C4)(["add-link",{disabled:"yes"!=Te.form.enable_cover_page}]),style:{"font-size":"0.875em"},target:"_blank",href:Te.newPagePath},[t[72]||(t[72]=(0,i.Lk)("span",{class:"icon is-small"},[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-add"})],-1)),(0,i.eW)(" "+(0,i.v_)(e.$i18n.get("label_create_new_page")),1)],10,ye)],64)):(0,i.Q3)("",!0)]})),_:1},8,["label","type","message"]),e.hasEndRightForm?((0,i.uX)(),(0,i.CE)("form",{key:1,id:"form-collection-end-right",class:"form-hook-region",innerHTML:e.getEndRightForm},null,8,ke)):(0,i.Q3)("",!0)])]),(0,i.Lk)("footer",xe,[(0,i.Lk)("div",$e,[(0,i.Lk)("button",{id:"button-cancel-collection-creation",class:"button is-outlined",type:"button",onClick:t[42]||(t[42]=function(){return Ie.cancelBack&&Ie.cancelBack.apply(Ie,arguments)})},(0,i.v_)(e.$i18n.get("cancel")),1)]),(0,i.Lk)("p",Ce,(0,i.v_)(Te.formErrorMessage),1),(0,i.Lk)("div",Fe,[Te.isNewCollection&&e.$userCaps.hasCapability("tnc_rep_edit_metadata")&&!Te.fromImporter?((0,i.uX)(),(0,i.CE)("button",{key:0,id:"button-submit-goto-metadata",class:"button is-secondary",onClick:t[43]||(t[43]=(0,i.D$)((function(e){return Ie.onSubmit("metadata")}),["prevent"]))},(0,i.v_)(e.$i18n.get("label_save_goto_metadata")),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Le,[Te.isNewCollection&&e.$userCaps.hasCapability("tnc_rep_edit_metadata")&&!Te.fromImporter?((0,i.uX)(),(0,i.CE)("button",{key:0,id:"button-submit-goto-filter",class:"button is-secondary",onClick:t[44]||(t[44]=(0,i.D$)((function(e){return Ie.onSubmit("filters")}),["prevent"]))},(0,i.v_)(e.$i18n.get("label_save_goto_filter")),1)):(0,i.Q3)("",!0)]),(0,i.Lk)("div",Me,[(0,i.Lk)("button",{id:"button-submit-collection-creation",class:"button is-success",onClick:t[45]||(t[45]=(0,i.D$)((function(e){return Ie.onSubmit("items")}),["prevent"]))},(0,i.v_)(e.$i18n.get("finish")),1)])])])):(0,i.Q3)("",!0),!Te.isLoading&&(Te.isNewCollection&&!e.$userCaps.hasCapability("tnc_rep_edit_collections")||!Te.isNewCollection&&Te.collection&&null!=Te.collection.current_user_can_edit&&0==Te.collection.current_user_can_edit)?((0,i.uX)(),(0,i.CE)("div",Ve,[(0,i.Lk)("section",Ee,[(0,i.Lk)("div",Pe,[t[75]||(t[75]=(0,i.Lk)("p",null,[(0,i.Lk)("span",{class:"icon"},[(0,i.Lk)("i",{class:"tainacan-icon tainacan-icon-30px tainacan-icon-items"})])],-1)),(0,i.Lk)("p",null,(0,i.v_)(e.$i18n.get("info_can_not_edit_collection")),1)])])])):(0,i.Q3)("",!0),(0,i.bF)(qe,{modelValue:Te.isLoading,"onUpdate:modelValue":t[46]||(t[46]=function(e){return Te.isLoading=e}),"is-full-page":!1,"can-cancel":!1},null,8,["modelValue"])],2)}},44182:(e,t,a)=>{a.d(t,{A:()=>p});var i=a(6934),o=a(40834),n=a(82933),l=a(1580),s=a(74042);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function c(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(e){if("string"==typeof e)return d(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var _n=0,i=function(){};return{s:i,n:function(){return _n>=e.length?{done:!0}:{done:!1,value:e[_n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n=!0,l=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return n=e.done,e},e:function(e){l=!0,o=e},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,i=Array(t);a<t;a++)i[a]=e[a];return i}function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var i=a.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const p={name:"CollectionEditionForm",components:{FileItem:l.A},mixins:[s.lg,s.X3],data:function(){return{collectionId:[String,Number],collection:null,isLoading:!1,form:{name:"",status:"",description:"",slug:"",enable_cover_page:"",thumbnail:"",header_image:"",files:[],enabled_view_modes:[],default_view_mode:[],default_order:"ASC",default_orderby:"date",allow_comments:"closed",allow_item_author_editing:"no",allow_item_slug_editing:"no",allows_submission:"no",submission_default_status:"draft",submission_anonymous_user:"no",hide_items_thumbnail_on_lists:"",submission_use_recaptcha:"no",item_enabled_document_types:{attachment:{enabled:"yes",label:this.$i18n.get("File","tainacan"),icon:"attachments"},url:{enabled:"yes",label:this.$i18n.get("URL","tainacan"),icon:"url"},text:{enabled:"yes",label:this.$i18n.get("Text","tainacan"),icon:"text"}},item_publication_label:this.$i18n.get("label_publication_data"),item_document_label:this.$i18n.get("Document","tainacan"),item_thumbnail_label:this.$i18n.get("Thumbnail","tainacan"),item_enable_thumbnail:"yes",item_attachment_label:this.$i18n.get("Attachments","tainacan"),item_enable_attachments:"yes",item_enable_metadata_focus_mode:"yes",item_enable_metadata_required_filter:"yes",item_enable_metadata_searchbar:"yes",item_enable_metadata_collapses:"yes",item_enable_metadata_enumeration:"yes",collection_taxonomies:[]},thumbnail:{},cover:{},isFetchingPages:!1,coverPages:[],coverPagesSearchQuery:"",coverPagesSearchPage:0,coverPage:"",coverPageTitle:"",coverPageEditPath:"",editFormErrors:{},formErrorMessage:"",isNewCollection:!1,isMapped:!1,mapper:!1,headerPlaceholderPath:tainacan_plugin.base_url+"/assets/images/placeholder_rectangle.png",thumbnailMediaFrame:void 0,headerImageMediaFrame:void 0,viewModesList:[],fromImporter:"",repositoryEnabledViewModes:tainacan_plugin.enabled_view_modes,reCAPTCHASettingsPagePath:tainacan_plugin.admin_url+"?page=tainacan_item_submission",newPagePath:tainacan_plugin.admin_url+"post-new.php?post_type=page",isUpdatingSlug:!1,entityName:"collection",metadataSearchCancel:void 0,isLoadingMetadata:!0,sortingMetadata:[],localDefaultOrderBy:"date",showCollectionsTaxonomiesOptions:!1,showItemsListOptions:!0,showItemEditionFormOptions:!1,showItemSubmissionOptions:!1,isLoadingCollectionTaxonomies:!1}},computed:u(u(u({},(0,o.L8)("metadata",{metadata:"getMetadata"})),(0,o.L8)("collection",["getCollectionTaxonomies"])),{},{validDefaultViewModes:function(){var e=this;return Array.isArray(this.form.enabled_view_modes)?this.form.enabled_view_modes.filter((function(t){return null!=e.registeredAndNotDisabledViewModes[t]&&0==e.registeredAndNotDisabledViewModes[t].full_screen})):[]},registeredAndNotDisabledViewModes:function(){var e=tainacan_plugin.registered_view_modes;for(var t in e)-1==tainacan_plugin.enabled_view_modes.indexOf(t)&&delete e[t];return e}}),watch:{"form.hide_items_thumbnail_on_lists":function(e){var t=this;if("yes"==e){var a={};Object.keys(tainacan_plugin.registered_view_modes).forEach((function(e){tainacan_plugin.registered_view_modes[e].requires_thumbnail||(a[e]=tainacan_plugin.registered_view_modes[e])})),this.registeredAndNotDisabledViewModes=a,this.form.enabled_view_modes=this.form.enabled_view_modes.filter((function(e){return null!=t.registeredAndNotDisabledViewModes[e]})),this.updateDefaultViewModeBasedOnEnabled(),"masonry"!=this.$userPrefs.get("admin_view_mode_"+this.collectionId)&&"grid"!=this.$userPrefs.get("admin_view_mode_"+this.collectionId)||this.$userPrefs.set("admin_view_mode_"+this.collectionId,"table")}else this.registeredAndNotDisabledViewModes=tainacan_plugin.registered_view_modes},localDefaultOrderBy:function(e){if(this.sortingMetadata&&this.sortingMetadata.length&&e){var t=this.sortingMetadata.findIndex((function(t){return t.id==e}));t>=0&&(this.form.default_orderby=this.$orderByHelper.getOrderByForMetadatum(this.sortingMetadata[t].metadata_type?this.sortingMetadata[t]:this.sortingMetadata[t].id))}}},mounted:function(){var e=this;if(null!=this.$route.query.fromImporter&&(this.fromImporter=this.$route.query.fromImporter),"new"==this.$route.path.split("/").pop())this.createNewCollection(),this.isNewCollection=!0;else if("settings"==this.$route.path.split("/").pop())this.isLoading=!0,this.pathArray=this.$route.path.split("/").reverse(),this.collectionId=this.pathArray[1],this.fetchCollection(this.collectionId).then((function(t){e.collection=t,e.initializeMediaFrames(),(0,i.dY)().then((function(){e.updateExtraFormData(e.collection)})),e.form.name=e.collection.name,e.form.description=e.collection.description,e.form.slug=e.collection.slug,e.form.status=e.collection.status,e.form.enable_cover_page=e.collection.enable_cover_page,e.form.cover_page_id=e.collection.cover_page_id,e.form.parent=e.collection.parent,e.form.default_view_mode=e.collection.default_view_mode,e.form.enabled_view_modes=JSON.parse(JSON.stringify(e.collection.enabled_view_modes.reduce((function(e,t){return"string"==typeof t&&e.push(t),e}),[]))),e.form.default_order=e.collection.default_order,e.form.default_orderby=e.collection.default_orderby,e.form.allow_comments=e.collection.allow_comments,e.form.allow_item_slug_editing=e.collection.allow_item_slug_editing,e.form.allow_item_author_editing=e.collection.allow_item_author_editing,e.form.allows_submission=e.collection.allows_submission,e.form.submission_anonymous_user=e.collection.submission_anonymous_user,e.form.submission_default_status=e.collection.submission_default_status,e.form.submission_use_recaptcha=e.collection.submission_use_recaptcha,e.form.hide_items_thumbnail_on_lists=e.collection.hide_items_thumbnail_on_lists,e.form.item_enabled_document_types=e.collection.item_enabled_document_types,e.form.item_publication_label=e.collection.item_publication_label,e.form.item_document_label=e.collection.item_document_label,e.form.item_thumbnail_label=e.collection.item_thumbnail_label,e.form.item_enable_thumbnail=e.collection.item_enable_thumbnail,e.form.item_attachment_label=e.collection.item_attachment_label,e.form.item_enable_attachments=e.collection.item_enable_attachments,e.form.item_enable_metadata_focus_mode=e.collection.item_enable_metadata_focus_mode,e.form.item_enable_metadata_required_filter=e.collection.item_enable_metadata_required_filter,e.form.item_enable_metadata_searchbar=e.collection.item_enable_metadata_searchbar,e.form.item_enable_metadata_collapses=e.collection.item_enable_metadata_collapses,e.form.item_enable_metadata_enumeration=e.collection.item_enable_metadata_enumeration,e.form.collection_taxonomies=e.collection.collection_taxonomies,null!=e.form.cover_page_id&&""!=e.form.cover_page_id&&(e.isFetchingPages=!0,e.fetchPage(e.form.cover_page_id).then((function(t){e.coverPage=t,e.coverPageTitle=e.coverPage.title.rendered,e.coverPageEditPath=tainacan_plugin.admin_url+"/post.php?post="+t.id+"&action=edit",e.isFetchingPages=!1})).catch((function(t){e.$console.error(t),e.isFetchingPages=!1}))),e.getMetadataForSorting(),e.isLoading=!1}));else{var t=this.$route.fullPath.split("/"),a=t.pop();"new"==t.pop()&&(this.isNewCollection=!0,this.isMapped=!0,this.mapper=a,this.createNewCollection())}this.fetchCollectionTaxonomies({termParent:0,termPerPage:tainacan_plugin.api_max_items_per_page}).then((function(){e.isLoadingCollectionTaxonomies=!1})).catch((function(){e.isLoadingCollectionTaxonomies=!1}))},methods:u(u(u({},(0,o.i0)("collection",["sendCollection","updateCollection","fetchCollection","sendAttachment","updateThumbnail","updateHeaderImage","fetchPages","fetchPage","fetchAllCollectionNames","fetchCollectionTaxonomies","updateCollectionTaxonomyValues"])),(0,o.i0)("metadata",["fetchMetadata"])),{},{updateSlug:_.debounce((function(){var e=this;!this.form.name||this.form.name.length<=0||(this.isUpdatingSlug=!0,this.getSamplePermalink(this.collectionId,this.form.name,this.form.slug).then((function(t){e.form.slug=t.data.slug,e.isUpdatingSlug=!1,e.formErrorMessage="",e.editFormErrors={}})).catch((function(t){e.$console.error(t),e.isUpdatingSlug=!1})))}),1e3),onSubmit:function(e){var t=this;this.isLoading=!0;var a={collection_id:this.collectionId,name:this.form.name,description:this.form.description,enable_cover_page:this.form.enable_cover_page,cover_page_id:this.form.cover_page_id,slug:this.form.slug,status:this.form.status,parent:this.form.parent,enabled_view_modes:this.form.enabled_view_modes,default_view_mode:this.form.default_view_mode,default_order:this.form.default_order,default_orderby:this.form.default_orderby,allows_submission:this.form.allows_submission,submission_anonymous_user:this.form.submission_anonymous_user,submission_default_status:this.form.submission_default_status,submission_use_recaptcha:this.form.submission_use_recaptcha,allow_comments:this.form.allow_comments,allow_item_slug_editing:this.form.allow_item_slug_editing,allow_item_author_editing:this.form.allow_item_author_editing,hide_items_thumbnail_on_lists:this.form.hide_items_thumbnail_on_lists,item_enabled_document_types:this.form.item_enabled_document_types,item_publication_label:this.form.item_publication_label,item_document_label:this.form.item_document_label,item_thumbnail_label:this.form.item_thumbnail_label,item_enable_thumbnail:this.form.item_enable_thumbnail,item_attachment_label:this.form.item_attachment_label,item_enable_attachments:this.form.item_enable_attachments,item_enable_metadata_focus_mode:this.form.item_enable_metadata_focus_mode,item_enable_metadata_required_filter:this.form.item_enable_metadata_required_filter,item_enable_metadata_searchbar:this.form.item_enable_metadata_searchbar,item_enable_metadata_collapses:this.form.item_enable_metadata_collapses,item_enable_metadata_enumeration:this.form.item_enable_metadata_enumeration};this.fillExtraFormData(a),this.updateCollection({collection_id:this.collectionId,collection:a}).then((function(a){t.collection=a,t.updateExtraFormData(t.collection),t.form.name=t.collection.name,t.form.slug=t.collection.slug,t.form.description=t.collection.description,t.form.status=t.collection.status,t.form.cover_page_id=t.collection.cover_page_id,t.form.enable_cover_page=t.collection.enable_cover_page,t.form.enabled_view_modes=t.collection.enabled_view_modes.map((function(e){return e.viewMode})),t.form.default_view_mode=t.collection.default_view_mode,t.form.default_order=t.collection.default_order,t.form.default_orderby=t.collection.default_orderby,t.form.allow_comments=t.collection.allow_comments,t.form.allow_item_slug_editing=t.collection.allow_item_slug_editing,t.form.allow_item_author_editing=t.collection.allow_item_author_editing,t.form.allows_submission=t.collection.allows_submission,t.form.submission_anonymous_user=t.collection.submission_anonymous_user,t.form.submission_default_status=t.collection.submission_default_status,t.form.submission_use_recaptcha=t.collection.submission_use_recaptcha,t.form.hide_items_thumbnail_on_lists=t.collection.hide_items_thumbnail_on_lists,t.form.item_enabled_document_types=t.collection.item_enabled_document_types,t.form.item_publication_label=t.collection.item_publication_label,t.form.item_document_label=t.collection.item_document_label,t.form.item_thumbnail_label=t.collection.item_thumbnail_label,t.form.item_enable_thumbnail=t.collection.item_enable_thumbnail,t.form.item_attachment_label=t.collection.item_attachment_label,t.form.item_enable_attachments=t.collection.item_enable_attachments,t.form.item_enable_metadata_focus_mode=t.collection.item_enable_metadata_focus_mode,t.form.item_enable_metadata_required_filter=t.collection.item_enable_metadata_required_filter,t.form.item_enable_metadata_searchbar=t.collection.item_enable_metadata_searchbar,t.form.item_enable_metadata_collapses=t.collection.item_enable_metadata_collapses,t.form.item_enable_metadata_enumeration=t.collection.item_enable_metadata_enumeration,t.isLoading=!1,t.formErrorMessage="",t.editFormErrors={},t.fromImporter?t.$router.go(-1):"metadata"==e?t.$router.push(t.$routerHelper.getCollectionMetadataPath(t.collectionId)):"filters"==e?t.$router.push(t.$routerHelper.getCollectionFiltersPath(t.collectionId)):t.$router.push(t.$routerHelper.getCollectionPath(t.collectionId))})).catch((function(e){var a,i=c(e.errors);try{for(i.s();!(a=i.n()).done;)for(var o=a.value,n=0,l=Object.keys(o);n<l.length;n++){var s=l[n];t.editFormErrors[s]=o[s]}}catch(e){i.e(e)}finally{i.f()}t.formErrorMessage=e.error_message,t.isLoading=!1}))},createNewCollection:function(){var e=this;this.isLoading=!0;var t={name:"",description:"",status:"auto-draft",mapper:!(!this.isMapped||0==this.mapper)&&this.mapper};this.fillExtraFormData(t),this.sendCollection(t).then((function(t){e.collectionId=t.id,e.collection=t,e.initializeMediaFrames(),e.form.name=e.collection.name,e.form.description=e.collection.description,e.form.enable_cover_page=e.collection.enable_cover_page,e.form.cover_page_id=e.collection.cover_page_id,e.form.slug=e.collection.slug,e.form.parent=e.collection.parent,e.form.default_view_mode=e.collection.default_view_mode,e.form.default_order=e.collection.default_order,e.form.default_orderby=e.collection.default_orderby,e.form.enabled_view_modes=e.collection.enabled_view_modes,e.form.allow_comments=e.collection.allow_comments,e.form.allow_item_slug_editing=e.collection.allow_item_slug_editing,e.form.allow_item_author_editing=e.collection.allow_item_author_editing,e.form.allows_submission=e.collection.allows_submission,e.form.submission_anonymous_user=e.collection.submission_anonymous_user,e.form.submission_default_status=e.collection.submission_default_status,e.form.submission_use_recaptcha=e.collection.submission_use_recaptcha,e.form.hide_items_thumbnail_on_lists=e.collection.hide_items_thumbnail_on_lists,e.form.item_enabled_document_types=e.collection.item_enabled_document_types,e.form.item_publication_label=e.collection.item_publication_label,e.form.item_document_label=e.collection.item_document_label,e.form.item_thumbnail_label=e.collection.item_thumbnail_label,e.form.item_enable_thumbnail=e.collection.item_enable_thumbnail,e.form.item_attachment_label=e.collection.item_attachment_label,e.form.item_enable_attachments=e.collection.item_enable_attachments,e.form.item_enable_metadata_focus_mode=e.collection.item_enable_metadata_focus_mode,e.form.item_enable_metadata_required_filter=e.collection.item_enable_metadata_required_filter,e.form.item_enable_metadata_searchbar=e.collection.item_enable_metadata_searchbar,e.form.item_enable_metadata_collapses=e.collection.item_enable_metadata_collapses,e.form.item_enable_metadata_enumeration=e.collection.item_enable_metadata_enumeration,e.form.status="publish",e.getMetadataForSorting(),e.isLoading=!1})).catch((function(t){e.$console.error(t),e.isLoading=!1}))},clearErrors:function(e){this.editFormErrors[e]=void 0},cancelBack:function(){this.fromImporter?this.$router.go(-1):this.$router.push(this.$routerHelper.getCollectionsPath())},updateViewModeslist:function(e){var t=this.form.enabled_view_modes.findIndex((function(t){return t==e}));t>-1?this.form.enabled_view_modes.splice(t,1):this.form.enabled_view_modes.push(e),this.updateDefaultViewModeBasedOnEnabled()},updateDefaultViewModeBasedOnEnabled:function(){var e=this;if(!this.checkIfViewModeEnabled(this.form.default_view_mode)){var t=this.form.enabled_view_modes.findIndex((function(t){return e.registeredAndNotDisabledViewModes[t]&&!e.registeredAndNotDisabledViewModes[t].full_screen}));t>=0&&(this.form.default_view_mode=this.form.enabled_view_modes[t])}},checkIfViewModeEnabled:function(e){return this.form.enabled_view_modes.includes(e)},fecthCoverPages:_.debounce((function(e){var t=this;e!=this.coverPagesSearchQuery&&(this.coverPagesSearchQuery=e,this.coverPages=[],this.coverPagesSearchPage=1),e.length||(this.coverPagesSearchQuery=e,this.coverPages=[],this.coverPagesSearchPage=1),this.coverPagesSearchPage>1&&this.coverPages.length>12*this.totalPages||(this.isFetchingPages=!0,this.fetchPages({search:this.coverPagesSearchQuery,page:this.coverPagesSearchPage}).then((function(e){if(e.pages){var a,i=c(e.pages);try{for(i.s();!(a=i.n()).done;){var o=a.value;t.coverPages.push(o)}}catch(e){i.e(e)}finally{i.f()}}e.totalPages&&(t.totalPages=e.totalPages),t.coverPagesSearchPage++,t.isFetchingPages=!1})).catch((function(e){t.$console.error(e),t.isFetchingPages=!1})))}),500),fetchMoreCoverPages:_.debounce((function(){this.fecthCoverPages(this.coverPagesSearchQuery)}),250),onSelectCoverPage:function(e){this.form.cover_page_id=e.id,this.coverPage=e,this.coverPageTitle=this.coverPage.title.rendered,this.coverPageEditPath=tainacan_plugin.admin_url+"post.php?post="+e.id+"&action=edit"},removeCoverPage:function(){this.coverPage={},this.coverPageTitle="",this.form.enable_cover_page="no",this.form.cover_page_id=""},deleteThumbnail:function(){var e=this;this.updateThumbnail({collectionId:this.collectionId,thumbnailId:0}).then((function(){e.collection.thumbnail=!1})).catch((function(t){e.$console.error(t)}))},deleteHeaderImage:function(){var e=this;this.updateHeaderImage({collectionId:this.collectionId,headerImageId:0}).then((function(){e.collection.header_image=!1})).catch((function(t){e.$console.error(t)}))},initializeMediaFrames:function(){var e=this;this.thumbnailMediaFrame=new n.A.thumbnailControl("my-thumbnail-media-frame",{button_labels:{frame_title:this.$i18n.get("instruction_select_collection_thumbnail"),frame_button:this.$i18n.get("label_select_file")},relatedPostId:this.collectionId,onSave:function(t){e.updateThumbnail({collectionId:e.collectionId,thumbnailId:t.id}).then((function(t){e.collection.thumbnail=t.thumbnail})).catch((function(t){return e.$console.error(t)}))}}),this.headerImageMediaFrame=new n.A.headerImageControl("my-header-image-media-frame",{button_labels:{frame_title:this.$i18n.get("instruction_select_collection_header_image"),frame_button:this.$i18n.get("label_select_file")},relatedPostId:this.collectionId,onSave:function(t){e.updateHeaderImage({collectionId:e.collectionId,headerImageId:t.id}).then((function(t){e.collection.header_image=t.header_image})).catch((function(t){return e.$console.error(t)}))}})},getMetadataForSorting:function(){var e=this;null!=this.metadataSearchCancel&&this.metadataSearchCancel.cancel("Metadata search Canceled."),this.isLoadingMetadata=!0,this.fetchMetadata({collectionId:this.collectionId,isContextEdit:!1,includeControlMetadataTypes:!0,metaquery:[{key:"metadata_type",compare:"NOT IN",value:["Tainacan\\Metadata_Types\\Core_Description","Tainacan\\Metadata_Types\\Taxonomy","Tainacan\\Metadata_Types\\Relationship","Tainacan\\Metadata_Types\\Compound","Tainacan\\Metadata_Types\\User","Tainacan\\Metadata_Types\\GeoCoordinate"]}]}).then((function(t){t.request.then((function(){if(e.sortingMetadata=JSON.parse(JSON.stringify(e.metadata)),e.sortingMetadata.push({name:e.$i18n.get("label_creation_date"),metadata_type:void 0,slug:"date",id:"date"}),e.form.default_orderby.metakey)e.localDefaultOrderBy=e.form.default_orderby.metakey;else if("title"==e.form.default_orderby){var t=e.sortingMetadata.findIndex((function(e){return"Tainacan\\Metadata_Types\\Core_Title"==e.metadata_type}));e.localDefaultOrderBy=t>=0?e.sortingMetadata[t].id:"title"}else if("description"==e.form.default_orderby){var a=e.sortingMetadata.findIndex((function(e){return"Tainacan\\Metadata_Types\\Core_Description"==e.metadata_type}));e.localDefaultOrderBy=a>=0?e.sortingMetadata[a].id:"description"}else e.localDefaultOrderBy=e.form.default_orderby;e.isLoadingMetadata=!1})).catch((function(){e.isLoadingMetadata=!1})),e.metadataSearchCancel=t.source})).catch((function(){return e.isLoadingMetadata=!1}))},updateCollectionTaxonomyTerm:function(e,t,a,i){var o=this;this.form.collection_taxonomies[t].terms=this.form.collection_taxonomies[t].terms||[],i?this.form.collection_taxonomies[t].terms[a.slug]=a:delete this.form.collection_taxonomies[t].terms[a.slug];var n=Object.values(this.form.collection_taxonomies[t].terms).map((function(e){return e.id||e.slug||e}));this.updateCollectionTaxonomyValues({collectionId:this.collection.id,taxonomyValues:f({},e,n)}).then((function(){o.$console.log("Collection Taxonomy Values updated successfully")})).catch((function(e){o.$console.error(e)}))}})}},47591:(e,t,a)=>{a.d(t,{A:()=>s});var i=a(31601),o=a.n(i),n=a(76314),l=a.n(n)()(o());l.push([e.id,'@media screen and (min-width: 1025px){.column[data-v-ea208af6]:last-of-type{padding-left:var(--tainacan-one-column) !important}}.field[data-v-ea208af6]{position:relative}.section-label[data-v-ea208af6]{font-size:1em !important;font-weight:500 !important;color:var(--tainacan-blue5) !important;line-height:1.2em}#button-edit-thumbnail[data-v-ea208af6],#button-edit-header-image[data-v-ea208af6],#button-delete-thumbnail[data-v-ea208af6],#button-delete-header-image[data-v-ea208af6]{border-radius:100px !important;max-height:2.125em !important;max-width:2.125em !important;min-height:2.125em !important;min-width:2.125em !important;padding:0 !important;z-index:99;margin-left:12px !important}#button-edit-thumbnail .icon[data-v-ea208af6],#button-edit-header-image .icon[data-v-ea208af6],#button-delete-thumbnail .icon[data-v-ea208af6],#button-delete-header-image .icon[data-v-ea208af6]{display:inherit;padding:0;margin:0;margin-top:-2px;font-size:1.125em;color:var(--tainacan-white) !important}.collection-form-section[data-v-ea208af6]{margin:1.5em 0 .5em -0.5em;position:relative;cursor:pointer}.collection-form-section .icon[data-v-ea208af6]{background:var(--tainacan-background-color);z-index:1;position:relative}.collection-form-section strong[data-v-ea208af6]{background:var(--tainacan-background-color);color:var(--tainacan-gray4);font-size:.875em;z-index:1;position:relative;padding-right:12px}.collection-form-section hr[data-v-ea208af6]{position:absolute;top:-0.75em;width:calc(100% - 42px);height:1px;background-color:var(--tainacan-gray2);margin-left:42px;transition:background-color .2s ease,height .2s ease}.collection-form-section:hover .icon[data-v-ea208af6],.collection-form-section:hover strong[data-v-ea208af6]{color:var(--tainacan-secondary)}.collection-form-section:hover hr[data-v-ea208af6]{background-color:var(--tainacan-primary);height:2px}.options-columns[data-v-ea208af6]{margin-left:.25rem;padding-left:1.25em;padding-right:.25em;padding-bottom:1.25em;border-left:1px solid var(--tainacan-gray2)}.options-columns .field[data-v-ea208af6],.options-columns>div[data-v-ea208af6]{-moz-column-break-inside:avoid;break-inside:avoid}.options-columns>div[data-v-ea208af6]:not(.field){-moz-column-count:2;-moz-column-gap:1.5em;-moz-column-rule:1px solid var(--tainacan-gray1);-webkit-column-count:2;-webkit-column-gap:1.5em;-webkit-column-rule:1px solid var(--tainacan-gray1);column-count:2;column-rule:1px solid var(--tainacan-gray1);margin-bottom:1.125rem}@media screen and (max-width: 600px){.options-columns>div[data-v-ea208af6]:not(.field){-moz-column-count:1;column-count:1}}@supports(contain: inline-size){#header-and-thumbnail-container[data-v-ea208af6]{container-type:inline-size;container-name:headerandthumbnailfield}}@container headerandthumbnailfield (max-width: 395px){#header-and-thumbnail-container .header-field .image-placeholder[data-v-ea208af6]{right:18%;top:34%}#header-and-thumbnail-container .thumbnail-field[data-v-ea208af6]{margin:0px;padding:0px}#header-and-thumbnail-container .thumbnail-field img[data-v-ea208af6],#header-and-thumbnail-container .thumbnail-field[data-v-ea208af6] .image-wrapper{border:none}#header-and-thumbnail-container .thumbnail-field .thumbnail-buttons-row[data-v-ea208af6]{left:61px;bottom:calc(1em + 0px)}}.header-field[data-v-ea208af6]{padding-top:1px}.header-field .image-placeholder[data-v-ea208af6]{position:absolute;left:unset;right:10%;top:38%;font-size:.875em;font-weight:bold;z-index:99;text-align:center;color:var(--tainacan-info-color)}.header-field .image-placeholder+img[data-v-ea208af6]{opacity:.5;border:1px dashed var(--tainacan-info-color)}.header-field .header-buttons-row[data-v-ea208af6]{text-align:right;top:-15px;position:relative}.header-field .image[data-v-ea208af6],.header-field img[data-v-ea208af6]{border-radius:3px}.header-field+.thumbnail-field[data-v-ea208af6]{opacity:1;transition:opacity .2s ease}.header-field:hover+.thumbnail-field[data-v-ea208af6]{opacity:.3}.thumbnail-field[data-v-ea208af6]{display:inline-block;padding:1rem;margin-top:-120px;margin-bottom:-30px;position:relative;z-index:99}.thumbnail-field .content[data-v-ea208af6]{padding:10px;font-size:.8em}.thumbnail-field .image[data-v-ea208af6]{border-radius:3px}.thumbnail-field .image:has(.image-placeholder) img[data-v-ea208af6]{opacity:.5;border:1px dashed var(--tainacan-info-color) !important}.thumbnail-field .image[data-v-ea208af6]:has(.image-placeholder){border:6px solid var(--tainacan-background-color);background:var(--tainacan-background-color)}.thumbnail-field img[data-v-ea208af6],.thumbnail-field[data-v-ea208af6] .image-wrapper{height:146px;width:146px;border-radius:3px;border:6px solid var(--tainacan-background-color)}.thumbnail-field .image-placeholder[data-v-ea208af6]{position:absolute;margin-left:26px;margin-right:26px;font-size:.8em;font-weight:bold;z-index:99;text-align:center;color:var(--tainacan-info-color);top:64px;max-width:90px}.thumbnail-field .thumbnail-buttons-row[data-v-ea208af6]{position:relative;left:52px;bottom:calc(1em + 12px)}.switch[data-v-ea208af6]{position:relative;top:-1px}.selected-cover-page[data-v-ea208af6]{border:1px solid var(--tainacan-gray2);padding:calc(.57em - 1px) 8px;font-size:.875em;height:auto;line-height:1em;min-height:32px;display:flex;justify-content:space-between;align-items:center}.selected-cover-page .span[data-v-ea208af6]{vertical-align:middle}.selected-cover-page .selected-cover-page-control[data-v-ea208af6]{float:right}.selected-cover-page-buttons[data-v-ea208af6]{float:right;padding:4px 6px}.selected-cover-page-buttons.disabled[data-v-ea208af6]{pointer-events:none;cursor:not-allowed}.selected-cover-page-buttons.disabled .icon[data-v-ea208af6]{color:var(--tainacan-gray2)}.sorting-options[data-v-ea208af6]{display:flex;align-items:center;width:100%}.sorting-options .label[data-v-ea208af6]{font-weight:normal;margin-bottom:0}.sorting-options .control.is-expanded[data-v-ea208af6]{width:100%}.sorting-options+.help[data-v-ea208af6]{opacity:.7}.status-radios[data-v-ea208af6]{flex-wrap:wrap;display:flex;margin:5px 0}.status-radios .checkbox[data-v-ea208af6]{width:auto}.status-radios .control-label[data-v-ea208af6]{display:flex;align-items:center}.options-checkboxes[data-v-ea208af6]{display:grid;margin:5px 1px;grid-template-columns:repeat(auto-fit, minmax(210px, 1fr));gap:.5rem;justify-content:space-between}.options-checkboxes[data-v-ea208af6] .b-checkbox.checkbox,.options-checkboxes[data-v-ea208af6] .b-radio.radio{width:auto}.options-checkboxes[data-v-ea208af6] .b-checkbox.checkbox .control-label,.options-checkboxes[data-v-ea208af6] .b-radio.radio .control-label{display:flex;align-items:center;white-space:normal}.two-thirds-layout-options[data-v-ea208af6]{display:flex;-moz-column-gap:1em !important;column-gap:1em !important}.two-thirds-layout-options>.field[data-v-ea208af6]:first-child{flex-basis:75%}.two-thirds-layout-options>.field[data-v-ea208af6]:last-child{flex-basis:25%}.two-thirds-layout-options .dropdown-trigger>.button[data-v-ea208af6]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media screen and (max-width: 782px){.two-thirds-layout-options[data-v-ea208af6]{flex-wrap:wrap;margin-bottom:1em}.two-thirds-layout-options>.field[data-v-ea208af6]{flex-basis:100% !important}.two-thirds-layout-options .dropdown-trigger>.button[data-v-ea208af6]{min-height:40px}}.item-submission-options[data-v-ea208af6]{padding-left:1em;padding-top:1em;margin-top:-1.5em;border-left:1px solid var(--tainacan-gray2)}.enabled-view-modes-dropdown[data-v-ea208af6]{position:relative;z-index:101}.enabled-view-modes-dropdown[data-v-ea208af6] .dropdown-item{display:flex !important}.enabled-view-modes-dropdown p[data-v-ea208af6]{white-space:normal}.enabled-view-modes-dropdown[data-v-ea208af6] svg{margin-left:-2px;overflow:hidden;vertical-align:middle}.tainacan-form[data-v-ea208af6]{padding-bottom:3.5rem}.footer[data-v-ea208af6]{padding:10px var(--tainacan-one-column);position:absolute;bottom:0;z-index:9999;background-color:var(--tainacan-gray1);width:100%;margin-left:calc(-1*var(--tainacan-one-column));height:3.5rem;display:flex;justify-content:flex-end;align-items:center;transition:bottom .5s ease,width .2s linear;box-shadow:0px 0px 12px -8px var(--tainacan-black)}.footer[data-v-ea208af6]::after,.footer[data-v-ea208af6]::before{height:18px;width:18px;background:rgba(0,0,0,0);display:block;content:"";position:absolute}.footer[data-v-ea208af6]::before{left:0;top:-18px;border-bottom-left-radius:9px;box-shadow:-9px 0px 0 0 var(--tainacan-gray1),inset 2px -2px 5px -3px var(--tainacan-gray2)}.footer[data-v-ea208af6]::after{right:0;top:-18px;border-bottom-right-radius:9px;box-shadow:9px 0px 0 0 var(--tainacan-gray1),inset -2px -2px 5px -3px var(--tainacan-gray2)}.footer .footer-message[data-v-ea208af6]{display:flex;align-items:center}.footer .update-info-section[data-v-ea208af6]{color:var(--tainacan-info-color);margin-right:auto;display:flex;flex-wrap:nowrap}.footer .help[data-v-ea208af6]{display:inline-flex;font-size:1em;margin-top:0;margin-left:24px}.footer .help .tainacan-help-tooltip-trigger[data-v-ea208af6]{margin-left:.25em}.footer .link-button[data-v-ea208af6]{background-color:rgba(0,0,0,0);border:none}@media screen and (max-width: 768px){.footer[data-v-ea208af6]{padding:13px .5em;margin-left:calc(-1*var(--tainacan-one-column) - var(--tainacan-page-container--inner-padding-x));width:100%;flex-wrap:wrap;height:auto;position:fixed}.footer .update-info-section[data-v-ea208af6]{margin-left:auto;margin-bottom:.75em;margin-top:-0.25em}}',""]);const s=l},53413:(e,t,a)=>{a.d(t,{A:()=>i.A});var i=a(44182)},66222:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var i=a(87133),o=a(53413);a(78579);const n=(0,a(66262).A)(o.A,[["render",i.X],["__scopeId","data-v-ea208af6"]])},78579:(e,t,a)=>{a(590)},82933:(e,t,a)=>{a.d(t,{A:()=>i});const i={attachmentControl:wp.customize.MediaControl.extend({initFrame:function(){var e=this;wp.media.view.settings.post={id:parseInt(this.params.relatedPostId),wp_customize:"off"},wp.media.model.settings.post.nonce=this.params.nonce,wp.media.model.settings.post.id=parseInt(this.params.relatedPostId),this.frame=wp.media({button:{text:this.params.button_labels.frame_button},states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({uploadedTo:wp.media.view.settings.post.id,orderby:"menuOrder",order:"ASC",posts_per_page:-1,query:!0}),autoSelect:!0,sortable:!0,filterable:!1})]}).open(),this.frame.$el.addClass("tainacan-item-attachments-modal"),this.frame.$el["tainacan-document-id"]=this.params.document,this.frame.$el["tainacan-thumbnail-id"]=this.params.thumbnailId,wp.media.view.Attachment.Library=wp.media.view.Attachment.Library.extend({className:function(){return"attachment "+(this.controller.$el["tainacan-document-id"]&&this.model.get("id")==this.controller.$el["tainacan-document-id"]?"tainacan-document-attachment ":" ")+(this.controller.$el["tainacan-thumbnail-id"]&&this.model.get("id")==this.controller.$el["tainacan-thumbnail-id"]?"tainacan-thumbnail-attachment ":" ")}}),this.frame.on("select",(function(){var t=e.frame.state().get("selection").toJSON();wp.media.view.settings.post.id={id:e.params.relatedPostId},e.params.attachments=t,e.params.onSave(t)}))}}),thumbnailControl:wp.customize.CroppedImageControl.extend({initFrame:function(){var e=wp.media.view.l10n="undefined"==typeof _wpMediaViewsL10n?{}:_wpMediaViewsL10n,t=wp.media.controller.Cropper.extend({doCrop:function(e){var t=e.get("cropDetails"),a=this.get("control"),i=t.width/t.height;return a.params.flex_width&&a.params.flex_height?(t.dst_width=t.width,t.dst_height=t.height):(t.dst_width=a.params.flex_width?a.params.height*i:a.params.width,t.dst_height=a.params.flex_height?a.params.width/i:a.params.height),wp.ajax.post("crop-image",{wp_customize:"off",nonce:e.get("nonces").edit,id:e.get("id"),context:a.id,cropDetails:t})}});wp.media.view.settings.post={id:null},this.params.flex_width=1,this.params.flex_height=1,this.params.width=220,this.params.height=220,this.frame=wp.media({frame:"select",button:{text:e.select,close:!1},uploader:!0,content:"upload",autoSelect:!0,states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:"image"}),multiple:!1,autoSelect:!0,date:!1,priority:20,suggestedWidth:this.params.width,suggestedHeight:this.params.height,uploadedTo:this.params.relatedPostId}),new t({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}).open(),this.frame.$el.addClass("tainacan-thumbnail-modal"),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},setImageFromAttachment:function(e){wp.media.view.settings.post.id={id:this.params.relatedPostId},this.params.attachments=e,this.params.onSave(e)}}),headerImageControl:wp.customize.CroppedImageControl.extend({initFrame:function(){var e=wp.media.view.l10n="undefined"==typeof _wpMediaViewsL10n?{}:_wpMediaViewsL10n,t=wp.media.controller.Cropper.extend({doCrop:function(e){var t=e.get("cropDetails"),a=this.get("control"),i=t.width/t.height;return a.params.flex_width&&a.params.flex_height?(t.dst_width=t.width,t.dst_height=t.height):(t.dst_width=a.params.flex_width?a.params.height*i:a.params.width,t.dst_height=a.params.flex_height?a.params.width/i:a.params.height),wp.ajax.post("crop-image",{wp_customize:"off",nonce:e.get("nonces").edit,id:e.get("id"),context:a.id,cropDetails:t})}});wp.media.view.settings.post={id:null},null!=tainacan_plugin.custom_header_support[0]?(this.params.flex_width=tainacan_plugin.custom_header_support[0].flex_width?1:0,this.params.flex_height=tainacan_plugin.custom_header_support[0].flex_height?1:0,this.params.width=tainacan_plugin.custom_header_support[0].width,this.params.height=tainacan_plugin.custom_header_support[0].height):(this.params.flex_width=!0,this.params.flex_height=!0,this.params.width=2e3,this.params.height=625),this.frame=wp.media({frame:"select",button:{text:e.select,close:!1},library:wp.media.query({type:"image",uploadedTo:null}),uploader:!0,content:"upload",states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({type:"image",uploadedTo:null}),multiple:!1,date:!1,priority:20,suggestedWidth:this.params.width,suggestedHeight:this.params.height}),new t({imgSelectOptions:this.calculateImageSelectOptions,control:this})]}).open(),this.frame.$el.addClass("tainacan-header-image-modal"),this.frame.on("select",this.onSelect,this),this.frame.on("cropped",this.onCropped,this),this.frame.on("skippedcrop",this.onSkippedCrop,this)},setImageFromAttachment:function(e){this.params.attachment=e,this.params.onSave(e)}}),documentFileControl:wp.customize.MediaControl.extend({initFrame:function(){var e=this;wp.media.view.settings.post={id:parseInt(this.params.relatedPostId),wp_customize:"off"},wp.media.model.settings.post.nonce=this.params.nonce,wp.media.model.settings.post.id=parseInt(this.params.relatedPostId),this.frame=wp.media({button:{text:this.params.button_labels.frame_button},content:"upload",states:[new wp.media.controller.Library({title:this.params.button_labels.frame_title,library:wp.media.query({uploadedTo:wp.media.view.settings.post.id,orderby:"menuOrder",order:"ASC",posts_per_page:-1,query:!0}),autoSelect:!0,multiple:!1,date:!1,sortable:!0,filterable:"unattached",uploadedTo:this.params.relatedPostId})]}).open(),this.frame.$el.addClass("tainacan-document-modal"),this.frame.on("select",(function(){var t,a,i=window._wpmejsSettings||{};a=e.frame.state().get("selection").first().toJSON(),e.params.attachment=a,e.params.onSave(a),(t=e.container.find("audio, video").get(0))?e.player=new MediaElementPlayer(t,i):e.cleanupPlayer()}))}})}},87133:(e,t,a)=>{a.d(t,{X:()=>i.X});var i=a(25570)}}]);