"use strict";(self.webpackChunktainacan=self.webpackChunktainacan||[]).push([[4877],{1954(e,i,t){t.r(i),t.d(i,{default:()=>h});var n=t(62214),a=t(48300),r=(t(91247),t(73889)),s=t(35189);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function l(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?l(Object(t),!0).forEach((function(i){p(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}function p(e,i,t){return(i=u(i))in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function d(e,i){for(var t=0;t<i.length;t++){var n=i[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function u(e){var i=function(e,i){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,i||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"==o(i)?i:i+""}var __=wp.i18n.__;tainacan_plugin.classes.TainacanMediaGallery=function(){return e=function e(i,t,n){!function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.thumbs_gallery_selector=i,this.main_gallery_selector=t,this.thumbsSwiper=null,this.mainSwiper=null,this.lightbox=null,this.options=n,this.initializeSwiper(),this.options.disable_lightbox||(this.main_gallery_selector?this.initializePhotoswipe(this.main_gallery_selector+" .swiper-wrapper"):this.thumbs_gallery_selector&&this.initializePhotoswipe(this.thumbs_gallery_selector+" .swiper-wrapper"))},i=[{key:"initializeSwiper",value:function(){if(this.thumbs_gallery_selector){var e={spaceBetween:12,slidesPerView:"auto",watchSlidesProgress:!0,navigation:{nextEl:".swiper-navigation-next_"+this.thumbs_gallery_selector,prevEl:".swiper-navigation-prev_"+this.thumbs_gallery_selector},pagination:{el:".swiper-pagination_"+this.thumbs_gallery_selector},centeredSlides:!0,centeredSlidesBounds:!0,centerInsufficientSlides:!0,slideToClickedSlide:!0,watchOverflow:!0,a11y:{slideRole:"",prevSlideMessage:__("Previous slide","tainacan"),nextSlideMessage:__("Next slide","tainacan"),firstSlideMessage:__("This is the first slide","tainacan"),lastSlideMessage:__("This is the last slide","tainacan")},modules:[s.Vx,s.Jq,s.dK],on:{init:function(e){e.el.classList.add("swiper-is-beginning")},slideChange:function(e){e.isBeginning?e.el.classList.add("swiper-is-beginning"):e.el.classList.remove("swiper-is-beginning"),e.isEnd?e.el.classList.add("swiper-is-end"):e.el.classList.remove("swiper-is-end")}}};e=c(c({},e),this.options.swiper_thumbs_options),this.thumbsSwiper=new r.A(this.thumbs_gallery_selector,e)}if(this.main_gallery_selector){var i={slidesPerView:1,slidesPerGroup:1,watchOverflow:!0,a11y:{slideRole:"",prevSlideMessage:__("Previous slide","tainacan"),nextSlideMessage:__("Next slide","tainacan"),firstSlideMessage:__("This is the first slide","tainacan"),lastSlideMessage:__("This is the last slide","tainacan")},pagination:{el:".swiper-pagination_"+this.main_gallery_selector,clickable:!0},modules:[s.Vx,s.Jq,s.dK]};if(i=c(c({},i),this.options.swiper_main_options),this.thumbs_gallery_selector&&this.thumbsSwiper&&(i.thumbs={swiper:this.thumbsSwiper,autoScrollOffset:3},i.modules=[s.Vx,s.Jq,s.WO,s.dK]),this.mainSwiper=new r.A(this.main_gallery_selector,i),this.thumbs_gallery_selector&&this.thumbsSwiper&&this.mainSwiper){var t=this.mainSwiper,n=this.thumbsSwiper;this.mainSwiper.on("slideChangeTransitionStart",(function(){n.slideTo(t.activeIndex)}));var a=document.querySelector(this.thumbs_gallery_selector);a&&a.setAttribute("aria-hidden","true")}}}},{key:"initializePhotoswipe",value:function(e){var i=this,t=document.querySelector(e);t.setAttribute("data-pswp-uid",this.options.media_id);var r=this;this.enhanceLinksForAccessibility(t);var s=this.parseThumbnailElements(t),o={loop:!1,preloadFirstSlide:!1,mainClass:"tainacan-photoswipe-layer"+(this.options.lightbox_has_light_background?" has-light-color-scheme":""),bgOpacity:.85,clickToCloseNonZoomable:!1,closeTitle:__("Close lightbox","tainacan"),zoomTitle:__("Zoom","tainacan"),arrowPrevTitle:__("Previous slide","tainacan"),arrowNextTitle:__("Next slide","tainacan"),errorMsg:__("The image cannot be loaded","tainacan"),wheelToZoom:!0,returnFocus:!0,getClickedIndexFn:function(e){return s.findIndex((function(i){return i.el.contains(e.target)}))},paddingFn:function(e,i,t){return{top:i.title&&i.title.name&&!r.options.hide_media_name?60:0,bottom:i.title&&(!r.options.hide_media_caption&&i.title.caption||!r.options.hide_media_description&&i.title.description)?60:0,left:40,right:40}}};this.lightbox=new n.A(c({gallery:t,children:s,pswpModule:a.A},o)),this.lightbox.init(),this.setupKeyboardAccessibility(t);var l=this.mainSwiper?this.mainSwiper:this.thumbsSwiper,p=this.photoswipeParseHash();p.pid&&p.gid&&this.options.media_id==p.gid&&(o.index=parseInt(p.pid,10)-1,!isNaN(o.index)&&s[o.index]&&s[o.index].el&&s[o.index].el.click()),this.lightbox.on("destroy",(function(){var e=document.getElementsByClassName("pswp__container")[0];if(e){var i=e.innerHTML;e.innerHTML="",e.innerHTML=i}})),this.lightbox.on("initialZoomInEnd",(function(){l.params&&l.params.autoplay&&l.params.autoplay.enabled&&l.autoplay.running&&l.autoplay.stop()})),this.lightbox.on("change",(function(){if(r.lightbox.pswp&&!isNaN(r.lightbox.pswp.currIndex)&&r.lightbox.pswp.currIndex>=0){l.slideTo(r.lightbox.pswp.currIndex);var e=window.location.toString();e.indexOf("#")>0?(e=e.substring(0,e.indexOf("#")),window.history.replaceState(window.history.state,"",e+"#gid="+i.options.media_id+"&pid="+(r.lightbox.pswp.currIndex+1))):window.history.pushState(window.history.state,"",e+"#gid="+i.options.media_id+"&pid="+(r.lightbox.pswp.currIndex+1))}})),this.lightbox.on("close",(function(){l.params&&l.params.autoplay&&l.params.autoplay.enabled&&l.autoplay.start();var e=window.location.toString();e.indexOf("#")>0&&window.history.replaceState({},"",e.substring(0,e.indexOf("#")))})),this.lightbox.on("uiRegister",(function(){r.lightbox.pswp.ui.registerElement({name:"name",order:7,isButton:!1,appendTo:"bar",onInit:function(e,i){r.lightbox.pswp.on("change",(function(){var t=i.currSlide.data,n="";t&&t.title&&t.title.name&&!r.options.hide_media_name&&(n+=t.title.name.innerHTML),e.innerHTML=n}))}}),r.lightbox.pswp.ui.registerElement({name:"caption",order:15,isButton:!1,appendTo:"root",onInit:function(e,i){r.lightbox.pswp.on("change",(function(){var t=i.currSlide.data,n="";t&&t.title&&(t.title.caption&&!r.options.hide_media_caption||t.title.description&&!r.options.hide_media_description)&&(n+='<div class="pswp__caption-inner">',t.title.caption&&!r.options.hide_media_caption&&(n+='<span class="pswp__figure_caption">'+t.title.caption.innerHTML+"</span>"),t.title.description&&!r.options.hide_media_description&&(n+='<span class="pswp__description">'+t.title.description.innerHTML+"</span>"),n+="</div>"),e.innerHTML=n}))}})}));var d=t.getElementsByClassName("tainacan-item-file-download");if(d&&d.length)for(var u=0;u<d.length;u++)d[u].addEventListener("click",(function(e){e.stopPropagation()}));var h=t.querySelectorAll(".swiper-slide-metadata a");if(h&&h.length)for(var m=0;m<h.length;m++)h[m].addEventListener("click",(function(e){e.stopPropagation()}))}},{key:"parseThumbnailElements",value:function(e){var i=[],t=e.childNodes;return Array.prototype.forEach.call(t,(function(e){if(1===e.nodeType){var t={},n=e.querySelectorAll(".media-full-content *");n.length?"IMG"===n[n.length-1].nodeName?(t={src:(n=n[n.length-1]).src,w:parseInt(n.width),h:parseInt(n.height)},n.alt&&(t.alt=n.alt)):t={html:(n=n[0]).outerHTML?n.outerHTML:n}:t={html:n.outerHTML?n.outerHTML:n};var a=e.querySelector(".swiper-slide-metadata");if(a){var r=a.querySelector(".swiper-slide-metadata__name"),s=a.querySelector(".swiper-slide-metadata__caption"),o=a.querySelector(".swiper-slide-metadata__description");t.title={name:r,caption:s,description:o}}else t.title=!1;t.el=e,i.push(t)}})),i}},{key:"photoswipeParseHash",value:function(){var e=window.location.hash.substring(1),i={};if(e.length<5)return i;for(var t=e.split("&"),n=0;n<t.length;n++)if(t[n]){var a=t[n].split("=");a.length<2||(i[a[0]]=a[1])}return i.pid&&(i.pid=parseInt(i.pid,10)),i}},{key:"enhanceLinksForAccessibility",value:function(e){var i=[],t=e.childNodes;Array.prototype.forEach.call(t,(function(e){1===e.nodeType&&e.classList.contains("swiper-slide")&&i.push(e)}));var n=i.length;i.forEach((function(e,i){var t=e.querySelector(".swiper-slide-content");if(t){for(var a=t.querySelectorAll("a[href]"),r=t.querySelector(".swiper-slide-metadata"),s=null,o=0;o<a.length;o++){var l=a[o];if(!(r&&r.contains(l)||l.closest(".tainacan-item-file-download"))){s=l;break}}var c=s?s.querySelector("img"):t.querySelector("img"),p=s?s.querySelector("video"):t.querySelector("video"),d=s?s.querySelector("iframe"):t.querySelector("iframe"),u=s?s.querySelector("audio"):t.querySelector("audio"),h=t.querySelector("figure"),m=e.querySelector(".swiper-slide-metadata__name"),g=[],f="";if(c&&c.alt&&c.alt.trim())f=c.alt.trim();else if(p)f=p.getAttribute("title")||p.getAttribute("aria-label")||__("Video","tainacan");else if(u)f=u.getAttribute("title")||u.getAttribute("aria-label")||__("Audio","tainacan");else if(d){var b=d.getAttribute("src")||"";f=b.includes(".pdf")||b.includes("pdf")?__("PDF document","tainacan"):__("Embedded content","tainacan")}f&&g.push(f),0===g.length&&m&&m.textContent.trim()&&g.push(m.textContent.trim());var y=__("Opens media gallery in lightbox","tainacan");if(n>1){var w=i+1+" "+__("of","tainacan")+" "+n;g.push(y+" ("+w+")")}else g.push(y);var _=g.join(". ");if(s)s.setAttribute("aria-haspopup","dialog"),s.setAttribute("aria-label",_),s.hasAttribute("tabindex")||s.setAttribute("tabindex","0");else{var v=h||t;v.setAttribute("role","button"),v.setAttribute("aria-haspopup","dialog"),v.setAttribute("aria-label",_),v.setAttribute("tabindex","0"),v.style.cursor||(v.style.cursor="pointer")}}}))}},{key:"setupKeyboardAccessibility",value:function(e){var i=[],t=e.childNodes;Array.prototype.forEach.call(t,(function(e){1===e.nodeType&&e.classList.contains("swiper-slide")&&i.push(e)})),i.forEach((function(e){var i=e.querySelector(".swiper-slide-content");if(i){for(var t=i.querySelectorAll("a[href]"),n=i.querySelector(".swiper-slide-metadata"),a=null,r=0;r<t.length;r++){var s=t[r];if(!(n&&n.contains(s)||s.closest(".tainacan-item-file-download"))){a=s;break}}var o=a;o||(o=i.querySelector("figure")||i),o&&o.addEventListener("keydown",(function(i){if("Enter"===i.key||" "===i.key){i.preventDefault(),i.stopPropagation();var t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window});a?a.dispatchEvent(t):e.dispatchEvent(t)}}))}}))}}],i&&d(e.prototype,i),t&&d(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,i,t}();const h=function(e){var i,t;if(e&&e.id&&null!==(i=tainacan_plugin)&&void 0!==i&&null!==(i=i.classes)&&void 0!==i&&i.TainacanMediaGallery&&null!==(t=tainacan_plugin)&&void 0!==t&&t.tainacan_media_components&&tainacan_plugin.tainacan_media_components[e.id]){var n=tainacan_plugin.tainacan_media_components[e.id];new tainacan_plugin.classes.TainacanMediaGallery(n.has_media_thumbs?"#"+n.media_thumbs_id:null,n.has_media_main?"#"+n.media_main_id:null,n)}}}}]);